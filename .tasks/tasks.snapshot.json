{
  "schema_version": "sv.tasks.v1",
  "generated_at": "2026-02-09T09:32:00.986297Z",
  "tasks": [
    {
      "id": "forge-6jy",
      "title": "fmail TUI: Compose overlay and quick-send bar",
      "status": "in_progress",
      "priority": "P1",
      "created_at": "2026-02-09T07:08:14.629945Z",
      "updated_at": "2026-02-09T09:32:00.964822Z",
      "created_by": "codex",
      "updated_by": "forge-fmail-next-4",
      "body": "Build the foundational compose UI components: the modal overlay for composing messages and the quick-send command bar. This is the plumbing that the full Human Operator Console (forge-p2m) builds on.\n\n## Layout — Compose Overlay\n```\n┌─ Compose ────────────────────────────────────────────────┐\n│                                                          │\n│  To: task_______        (Tab to autocomplete)            │\n│  Priority: [normal ▾]                                    │\n│  Tags: auth, urgent_    (comma-separated)                │\n│  Reply to: 20260209-153000-0001  (auto-filled)          │\n│                                                          │\n│  ┌──────────────────────────────────────────────────── │\n│  │ Here's the implementation plan for JWT auth:         │\n│  │                                                      │\n│  │ 1. RS256 signing with rotating keys                  │\n│  │ 2. 15-minute access token expiry                     │\n│  │ 3. Single-use refresh tokens                         │\n│  │                                                      │\n│  │ I'll start with the token service.                   │\n│  └──────────────────────────────────────────────────── │\n│                                                          │\n│  [Ctrl+Enter: Send]  [Esc: Cancel]  [Tab: Next field]   │\n└──────────────────────────────────────────────────────────┘\n```\n\n## Deliverables\n- Compose overlay (modal):\n  - Triggered by: `n` (new message), `r` (reply to selected message)\n  - Semi-transparent overlay on top of current view\n  - Fields:\n    - To: text input with tab-completion for agent names (@agent) and topic names\n      - Autocomplete dropdown showing matching agents/topics as user types\n      - Pre-filled when replying (to = sender of selected message) or when in a topic view\n    - Priority: dropdown selector (low / normal / high), default normal\n    - Tags: comma-separated text input with tab-completion for existing tags\n    - Reply to: auto-filled when using `r`, shows the parent message ID + preview\n    - Body: multi-line text area (main input)\n  - Tab cycles between fields, Enter in single-line fields moves to next field\n  - Ctrl+Enter: send the message\n  - Esc: cancel (with confirmation if body is non-empty: \"Discard draft?\")\n- Message sending:\n  - Sends via the data provider (which uses forged socket if available, file store otherwise)\n  - Show sending indicator (\"Sending...\") with spinner\n  - On success: close overlay, show brief \"Sent ✓\" notification, message appears in feed\n  - On error: show error message in the overlay, keep draft intact for retry\n  - Set FMAIL_AGENT identity from CLI flag or auto-detect\n- Reply mode:\n  - `r` on a selected message → opens compose with:\n    - To: pre-filled with the topic (or @sender for DMs)\n    - Reply to: set to the selected message's ID\n    - Body: empty, but header shows \"Replying to: <first line of parent message>\"\n  - `R` (shift+r) → reply to sender directly (DM) regardless of where the original was posted\n- Quick send bar:\n  - From any view, press `:` to open a one-line quick send bar at the bottom of the screen\n  - Syntax: `:<target> <message>` (e.g., `:task implement JWT auth`)\n  - Press Enter to send immediately\n  - Tab completion for target names in the quick send bar\n  - No priority/tag/reply-to options (uses defaults)\n  - Great for fast, informal messages\n  - History: ↑/↓ to cycle through previous quick-sends\n- Draft persistence:\n  - If user navigates away from compose (Esc), offer to save draft\n  - Drafts stored in tui-state.json\n  - On next compose, offer to restore last draft if target matches\n\n## Technical Notes\n- Multi-line text input: use charmbracelet/bubbles textarea component\n- Tab completion: build a trie or sorted list of known agents/topics, filter on prefix\n- Autocomplete dropdown: rendered as a small list below the input, navigate with ↑/↓\n- Send via fmail store: write JSON message file to .fmail/topics/<topic>/ or .fmail/dm/<agent>/\n  - Or send via forged socket: {\"cmd\":\"send\",\"to\":\"<target>\",\"body\":\"<msg>\",\"agent\":\"<self>\"}\n- Identity: the TUI needs to know \"who am I\" — set via --agent flag or FMAIL_AGENT env var\n  - If not set, register as \"tui-<pid>\" or prompt user on first send\n- Ctrl+Enter detection: tea.KeyMsg with ctrl+enter (may need platform-specific handling)",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-09T09:32:00.964822Z",
      "started_by": "forge-fmail-next-4",
      "comments_count": 1,
      "last_comment_at": "2026-02-09T07:24:40.738302Z"
    },
    {
      "id": "forge-rsx",
      "title": "fmail TUI: Local state persistence (read markers, bookmarks, settings)",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-02-09T07:02:36.584742Z",
      "updated_at": "2026-02-09T09:31:27.063033Z",
      "created_by": "codex",
      "updated_by": "forge-fmail-next-4",
      "body": "Implement local TUI state that persists across sessions, stored in .fmail/tui-state.json.\n\n## Deliverables\n- `internal/fmailtui/state/state.go` — TUIState struct and persistence:\n  ```go\n  type TUIState struct {\n      ReadMarkers   map[string]string          // topic/dm -> last-read message ID\n      Bookmarks     []Bookmark                  // saved message references\n      Annotations   map[string]string           // message ID -> user annotation text\n      StarredTopics []string                    // pinned/starred topic names\n      SavedSearches []SavedSearch               // named search presets\n      Preferences   Preferences                 // UI preferences\n      NotifyRules   []NotificationRule          // notification configuration\n      LastView      string                      // last active view (for session restore)\n      LastTopic     string                      // last viewed topic\n  }\n  \n  type Bookmark struct {\n      MessageID string\n      Topic     string    // topic name or \"@agent\" for DMs\n      Note      string    // optional user note\n      CreatedAt time.Time\n  }\n  \n  type SavedSearch struct {\n      Name   string\n      Query  SearchQuery\n  }\n  \n  type Preferences struct {\n      DefaultLayout string   // \"single\", \"split\", \"dashboard\", \"zen\"\n      LiveTailAuto  bool     // auto-scroll in live tail mode\n      RelativeTime  bool     // show \"2m ago\" vs full timestamp\n      SoundAlerts   bool     // terminal bell on notifications\n  }\n  \n  type NotificationRule struct {\n      Name     string\n      Topic    string   // topic filter (glob pattern)\n      From     string   // agent filter (glob pattern)\n      Priority string   // min priority (high, normal, low)\n      Tags     []string // required tags\n      Enabled  bool\n  }\n  ```\n- Load on startup, save on change (debounced writes, max 1 write/sec)\n- File locking for concurrent access (in case multiple TUI instances)\n- Migration support: version field in JSON, upgrade logic for schema changes\n- Unread count computation: compare ReadMarkers against actual message IDs\n\n## Technical Notes\n- Store at .fmail/tui-state.json (not in topics/ or dm/ to avoid polluting message dirs)\n- Use atomic write (write to .tmp, rename) to avoid corruption\n- ReadMarkers use the last-read message ID — since IDs are sortable, any message with ID > marker is unread\n- Keep file small: prune bookmarks older than 30 days on save, limit to 500 bookmarks\n- This is purely local state — never synced via forged or across hosts",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-09T09:20:38.600542Z",
      "started_by": "forge-fmail-next-4",
      "closed_at": "2026-02-09T09:31:27.063033Z",
      "closed_by": "forge-fmail-next-4",
      "comments_count": 0
    },
    {
      "id": "forge-hhp",
      "title": "fmail TUI: Conversation Thread view",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-09T07:04:08.941085Z",
      "updated_at": "2026-02-09T09:20:47.618396Z",
      "created_by": "codex",
      "updated_by": "forge-fmail-next-2",
      "body": "Build the Thread View — the primary view for reading messages within a topic or DM conversation.\n\n## Layout\n```\n┌─ task ─────────────────────────────────── 47 messages ───┐\n│                                                          │\n│  ┌─ architect (15:30) ──────────────────────────────── │\n│  │ implement JWT auth for the user service.             │\n│  │ Requirements: RS256 signing, 15min expiry,           │\n│  │ refresh tokens with sliding window.                  │\n│  │ Priority: high  Tags: [auth] [urgent]                │\n│  └──────────────────────────────────────────────────────│\n│    ├─ coder-1 (15:31) ─────────────────────────────── │\n│    │ on it, ETA 30min. Quick question — should          │\n│    │ refresh tokens be single-use or reusable?          │\n│    └────────────────────────────────────────────────────│\n│      └─ architect (15:34) ─────────────────────────── │\n│        │ Single-use. Each refresh mints a new           │\n│        │ refresh token alongside the access token.      │\n│        └────────────────────────────────────────────────│\n│                                                          │\n│  ┌─ tester (15:45) ───────────────────────────────── │\n│  │ Integration test suite is ready. Run with:           │\n│  │ `go test ./auth/... -tags=integration`               │\n│  └──────────────────────────────────────────────────────│\n│                                                          │\n└──────────────────────────────────────────────────────────┘\n r reply  b bookmark  / search  j/k scroll  g/G top/bot  Esc back\n```\n\n## Deliverables\n- Threaded message display:\n  - Uses the thread reconstruction engine to group messages into threads\n  - Thread roots displayed at base indentation\n  - Replies indented with tree connectors (├─, └─, │)\n  - Max visible indent depth: 6 levels (deeper threads flatten with a \"...\" indicator)\n  - Each message card shows:\n    - Header: agent name (in their color) + timestamp (relative by default, full on focus)\n    - Body: full message text with word wrapping\n    - Footer (if applicable): priority badge, tag pills, reply-to indicator\n    - Unread indicator: bold left border or dot for messages newer than ReadMarker\n  - Empty lines between thread groups for visual separation\n- Message selection:\n  - j/k or ↑/↓ to move between messages\n  - Selected message highlighted with accent border\n  - Enter on a message → expand/collapse its children (if threaded)\n  - Full message details on focus (show full timestamp, message ID, host)\n- Message body rendering:\n  - Wrap to pane width\n  - Preserve code blocks (``` fenced) with syntax-highlighted background\n  - Inline code (`backtick`) with distinct background\n  - Truncate extremely long messages (>50 lines) with \"... [show more]\" — Enter to expand\n- Scroll behavior:\n  - j/k message-by-message, Ctrl+D/Ctrl+U half-page, g/G top/bottom\n  - Scroll position remembered when navigating away and back\n  - \"New messages\" indicator at bottom when scrolled up and new messages arrive\n  - Jump to newest with G or clicking the indicator\n- Flat mode toggle:\n  - Press `f` to toggle between threaded and flat (chronological) view\n  - Flat view shows all messages in time order without indentation\n  - Useful when threads are sparse or reply_to is rarely used\n- Header bar: topic name + message count + participant count\n- Mark-as-read: automatically advance ReadMarker as user scrolls through messages\n\n## Technical Notes\n- Thread view is the most important view — invest heavily in rendering quality\n- Use the threading.FlattenThread() to get display order\n- Message cards should be lipgloss-styled boxes with agent-colored left border\n- For performance, virtualize the list — only render visible messages + buffer\n  (Bubbletea viewport or custom scroll implementation)\n- Re-render only on: new message, scroll, resize, or selection change\n- If the topic has >1000 messages, paginate (load 100 at a time, fetch more on scroll-up)",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-09T08:43:34.763829Z",
      "started_by": "forge-fmail-next-3",
      "closed_at": "2026-02-09T09:20:47.618396Z",
      "closed_by": "forge-fmail-next-2",
      "comments_count": 0
    },
    {
      "id": "forge-1p8",
      "title": "fmail TUI: Topic Browser view",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-09T07:03:41.615139Z",
      "updated_at": "2026-02-09T09:19:00.223233Z",
      "created_by": "codex",
      "updated_by": "forge-fmail-next-5",
      "body": "Build the Topic Browser — a navigable list of all topics with preview pane.\n\n## Layout\n```\n┌─ Topics ─────────────────────────────────────────────────┐\n│ Filter: _________                                        │\n│                                                          │\n│  TOPIC         MSGS  LAST ACTIVE   AGENTS               │\n│ ▸ task          47   2m ago        architect, coder-1    │\n│   build         23   5m ago        coder-1, tester       │\n│   editing        8   1h ago        coder-1               │\n│   deploy         3   3h ago        deployer              │\n│   review        15   15m ago       reviewer, architect   │\n│   ★ alerts       2   1d ago        monitor               │\n│───────────────────────┬──────────────────────────────────│\n│  Preview: task        │                                  │\n│                       │                                  │\n│  15:34 architect      │  15:33 coder-1                   │\n│  Use sliding window   │  need clarification on           │\n│  for token refresh.   │  token refresh flow              │\n│  Reply in 30min.      │                                  │\n│                       │  15:31 coder-1                   │\n│  15:32 architect      │  on it, ETA 30min                │\n│  run full test suite  │                                  │\n└───────────────────────┴──────────────────────────────────┘\n Enter: open  ★ star  d: DMs  ↑↓ navigate  / filter  Esc back\n```\n\n## Deliverables\n- Topic list (top/left pane):\n  - Sortable columns: topic name, message count, last active, participants\n  - Default sort: last active (most recent first)\n  - Cycle sort with `s` key (name → count → activity → participants)\n  - Starred/pinned topics always at top (persisted in tui-state.json)\n  - Star/unstar with `★` or `*` key\n  - Color-coded activity heat: hot (red/orange for active), warm (yellow), cold (grey for idle)\n  - Activity thresholds configurable but defaults: hot=<5m, warm=<1h, cold=>1h\n  - Fuzzy filter: typing in the filter box narrows the list instantly\n  - Show total unread count per topic (from ReadMarkers in tui-state)\n  - Unread topics shown in bold\n- Preview pane (bottom/right):\n  - Shows last N messages (default 10) from the selected topic\n  - Messages rendered with agent colors and timestamps\n  - Preview updates as cursor moves through topic list\n  - Scrollable within the preview pane\n- Navigation:\n  - Enter on a topic → push to Thread View for that topic\n  - `d` → switch to DM browser (similar layout but for direct messages)\n  - `n` → compose new message to this topic\n  - Esc → back to dashboard\n- DM Browser (toggled with `d`):\n  - Same layout but shows DM conversations instead of topics\n  - Grouped by conversation partner\n  - Show unread count per conversation\n  - Enter → open DM thread\n\n## Technical Notes\n- Use the data provider's Topics() method, refresh on a timer (2s) or on new message events\n- Fuzzy filtering: simple substring match is fine for V1, upgrade to fuzzy scoring later\n- Preview pane reads messages lazily — only fetch when topic is highlighted\n- Cache preview messages to avoid re-reading when navigating back\n- Topic metadata (message count, participants) computed from message scan or cached",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-09T08:58:45.879710Z",
      "started_by": "forge-fmail-next-5",
      "closed_at": "2026-02-09T09:19:00.223233Z",
      "closed_by": "forge-fmail-next-5",
      "comments_count": 0
    },
    {
      "id": "forge-ch9",
      "title": "fmail TUI: Live Dashboard view (home screen)",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-09T07:03:18.451151Z",
      "updated_at": "2026-02-09T08:42:24.475551Z",
      "created_by": "codex",
      "updated_by": "forge-fmail-next-3",
      "body": "Build the main dashboard view — the home screen users see when launching the TUI.\n\n## Layout (responsive to terminal width)\n```\n┌─ fmail TUI ──────────────────────────────── connected ─┐\n│                                                         │\n│  AGENTS (4 online)          │  LIVE FEED                │\n│  ● architect  \"designing\"   │  15:30 architect → task   │\n│  ● coder-1    \"JWT auth\"    │    implement JWT auth     │\n│  ○ reviewer   (3m ago)      │  15:31 coder-1 → task     │\n│  ◌ tester     (2h ago)      │    on it, ETA 30min       │\n│                             │  15:32 architect → build   │\n│  TOPICS (hot)               │    run full test suite     │\n│  ██ task       12 msgs/5m   │  15:33 coder-1 → @arch    │\n│  █░ build      3 msgs/5m   │    need clarification on   │\n│  ░░ editing    idle         │    token refresh flow      │\n│  ░░ deploy     idle         │  15:34 architect → @coder  │\n│                             │    use sliding window...   │\n│                             │                            │\n└─────────────────────────────┴────────────────────────────┘\n [T]opics [A]gents [/]Search [L]ive tail  [?]Help  q Quit\n```\n\n## Deliverables\n- Left panel — Agent roster (compact):\n  - Show all agents sorted by last_seen (most recent first)\n  - Presence indicators: ● online (<1m), ○ recent (<10m), ◌ stale (>10m)\n  - Status message truncated to fit column width\n  - Agent name in their assigned color\n  - Click/Enter to jump to Agent Detail view\n- Left panel — Topic summary (below agents):\n  - List topics sorted by recent activity\n  - Activity bar: visual indicator of messages in last 5 minutes (miniature bar chart using block chars ░▒▓█)\n  - Show message count in time window\n  - Click/Enter to jump to Topic view\n- Right panel — Live message feed:\n  - Real-time stream of ALL messages across all topics and DMs\n  - Each message: timestamp, sender (colored) → target, first line of body\n  - Auto-scrolls to bottom as new messages arrive\n  - Scroll up to pause auto-scroll, press End/G to resume\n  - Messages truncated to single line with \"...\" for long bodies\n  - Click/Enter on a message to jump to its thread in the Thread View\n- Header bar: \"fmail TUI\" + connection status (connected/polling/disconnected) + project name\n- Footer bar: keybinding hints for navigation\n- Auto-refresh: agent list and topic summary refresh on new messages or every 2s\n\n## Technical Notes\n- Use lipgloss.JoinHorizontal for the two-panel layout\n- Left panel width: 30-40% of terminal, min 30 chars, max 50 chars\n- The live feed should use the Subscribe() channel from the data provider\n- Buffer up to 500 messages in the feed (drop oldest when full)\n- On narrow terminals (<80 cols), collapse to single-panel mode (feed only)",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-09T08:26:39.404463Z",
      "started_by": "forge-fmail-next-2",
      "closed_at": "2026-02-09T08:42:24.475551Z",
      "closed_by": "forge-fmail-next-3",
      "comments_count": 0
    },
    {
      "id": "forge-1fs",
      "title": "fmail TUI: Thread reconstruction engine (reply_to chain building)",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-09T07:02:52.673152Z",
      "updated_at": "2026-02-09T08:26:07.539262Z",
      "created_by": "codex",
      "updated_by": "forge-fmail-next-3",
      "body": "Build a thread reconstruction engine that assembles flat messages into threaded conversations using the reply_to field.\n\n## Deliverables\n- `internal/fmailtui/threading/threading.go`:\n  ```go\n  type Thread struct {\n      Root     *fmail.Message   // first message (or the one with no reply_to in the chain)\n      Messages []*ThreadNode    // all messages in chronological order\n      Depth    int              // max nesting depth\n      Agents   []string         // unique participating agents\n      LastActivity time.Time    // most recent message timestamp\n  }\n  \n  type ThreadNode struct {\n      Message  *fmail.Message\n      Parent   *ThreadNode      // nil if root\n      Children []*ThreadNode    // replies to this message\n      Depth    int              // nesting level (0 = root)\n  }\n  \n  // BuildThreads takes a flat list of messages and returns threaded conversations\n  func BuildThreads(messages []fmail.Message) []*Thread\n  \n  // BuildThread reconstructs a single thread from a root message ID\n  func BuildThread(messages []fmail.Message, rootID string) *Thread\n  \n  // FlattenThread returns messages in display order (depth-first, chronological siblings)\n  func FlattenThread(thread *Thread) []*ThreadNode\n  ```\n- Thread building algorithm:\n  1. Index all messages by ID in a map\n  2. For each message with reply_to, link to parent\n  3. Messages with no reply_to (or reply_to not found) become thread roots\n  4. Sort roots by earliest message timestamp\n  5. Sort children within each parent by timestamp\n  6. Handle orphaned replies gracefully (reply_to points to unknown ID — treat as new root)\n  7. Handle cross-topic replies (reply_to from a different topic — show with a \"from topic X\" indicator)\n- Thread summary generation: first line of root message + participant count + message count + last activity\n\n## Technical Notes\n- Many messages will have no reply_to (standalone messages) — each becomes a single-message thread\n- Thread depth should be capped at a display limit (e.g., 10 levels) to prevent pathological nesting\n- This is a pure data transformation — no I/O, no state, fully testable\n- Write comprehensive tests with edge cases: circular reply_to, self-reply, missing parent, deep chains\n- Performance target: reconstruct threads for 10,000 messages in <100ms",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-09T08:21:38.217483Z",
      "started_by": "forge-fmail-next-2",
      "closed_at": "2026-02-09T08:26:07.539262Z",
      "closed_by": "forge-fmail-next-3",
      "comments_count": 0
    },
    {
      "id": "forge-r1b",
      "title": "fmail TUI: Message data layer and store abstraction",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-09T07:02:02.365217Z",
      "updated_at": "2026-02-09T08:20:42.362375Z",
      "created_by": "codex",
      "updated_by": "forge-fmail-next-1",
      "body": "Build the data layer that the TUI uses to read messages, agents, and topics from both the fmail file store and the forged daemon.\n\n## Deliverables\n- `internal/fmailtui/data/provider.go` — interface abstracting message access:\n  ```go\n  type MessageProvider interface {\n      // List topics with metadata (message count, last activity, participants)\n      Topics() ([]TopicInfo, error)\n      // List messages in a topic, with optional filters (since, from, priority, tags)\n      Messages(topic string, opts MessageFilter) ([]fmail.Message, error)\n      // List DM conversations for a given agent\n      DMConversations(agent string) ([]DMConversation, error)\n      // List DMs with a specific agent\n      DMs(agent string, opts MessageFilter) ([]fmail.Message, error)\n      // List all known agents\n      Agents() ([]fmail.AgentRecord, error)\n      // Search across all messages\n      Search(query SearchQuery) ([]SearchResult, error)\n      // Subscribe to new messages (returns a channel)\n      Subscribe(filter SubscriptionFilter) (<-chan fmail.Message, func())\n  }\n  ```\n- `FileProvider` — implementation backed by .fmail/ directory reads\n  - Scans topics/ and dm/ directories\n  - Parses JSON message files\n  - Caches results with TTL (configurable, default 500ms)\n  - File-based polling for Subscribe() at configurable interval\n- `ForgedProvider` — implementation backed by forged socket connection\n  - Connects via Unix socket or TCP\n  - Uses the line-delimited JSON protocol (cmd: watch, send, etc.)\n  - Real-time Subscribe() via watch stream\n  - Falls back to FileProvider if connection lost\n- `HybridProvider` — wraps both, prefers forged for live data, file store for historical queries\n  - Auto-detects forged availability (check for .fmail/forged.sock)\n  - Transparent fallback with reconnect attempts\n- TopicInfo struct: Name, MessageCount, LastActivity time.Time, Participants []string, LastMessage *fmail.Message\n- DMConversation struct: Agent string, MessageCount int, LastActivity time.Time, UnreadCount int\n- SearchQuery struct: Text string, From string, To string, Priority string, Tags []string, Since/Until time.Time\n- SearchResult struct: Message fmail.Message, Topic string, MatchOffset int, MatchLength int\n\n## Technical Notes\n- Message IDs are sortable (YYYYMMDD-HHMMSS-NNNN) — use this for efficient range queries\n- For file-based scanning, use os.ReadDir and sort by filename (=chronological order)\n- Keep an in-memory message cache with LRU eviction to avoid re-reading files\n- The Subscribe channel should deliver messages in order, buffering if consumer is slow\n- Forged protocol: send {\"cmd\":\"watch\",\"topic\":\"*\",\"agent\":\"tui-viewer\"} for all-topics stream",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-09T07:57:33.375047Z",
      "started_by": "codex",
      "closed_at": "2026-02-09T08:20:42.362375Z",
      "closed_by": "forge-fmail-next-1",
      "comments_count": 1,
      "last_comment_at": "2026-02-09T08:17:55.447275Z"
    },
    {
      "id": "forge-9pn",
      "title": "fmail TUI: Bubbletea app scaffold and entry point",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-09T07:01:43.362290Z",
      "updated_at": "2026-02-09T08:20:31.900573Z",
      "created_by": "codex",
      "updated_by": "forge-fmail-next-2",
      "body": "Create the foundational Bubbletea application scaffold for the fmail TUI.\n\n## Deliverables\n- New package: `internal/fmailtui/` with app.go as the main model\n- `cmd/fmail-tui/main.go` entry point (or integrate as `fmail tui` subcommand)\n- Bubbletea Model/Init/Update/View lifecycle wired up\n- Window size tracking (terminal resize handling)\n- Basic view routing: an enum of viewIDs (dashboard, topics, thread, agents, search, timeline, etc.) with a view stack for push/pop navigation\n- Keyboard event routing to the active view\n- Global quit (q/Ctrl+C), help (?), and view-switch keybindings\n- Accept CLI flags: --project (fmail project ID), --root (fmail root dir), --forged-addr (socket/TCP address), --theme (default/high-contrast), --poll-interval\n- Initialize fmail store (internal/fmail.Store) and optionally connect to forged\n\n## Technical Notes\n- Follow the pattern in internal/tui/app.go but keep it much leaner\n- Use a viewStack []viewID for breadcrumb-style navigation (push on enter, pop on Esc/backspace)\n- Each view is a sub-model implementing its own Update/View\n- Global keybindings handled before delegating to active view\n- The model should hold references to shared state: fmail.Store, forgedClient (nullable), theme/styles, terminal dimensions",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-09T07:56:17.873296Z",
      "started_by": "forge-fmail-dev-9pn",
      "closed_at": "2026-02-09T08:20:31.900573Z",
      "closed_by": "forge-fmail-next-2",
      "comments_count": 0
    },
    {
      "id": "forge-036",
      "title": "fmail TUI: Styling system and agent color assignment",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-09T07:02:19.303064Z",
      "updated_at": "2026-02-09T08:19:56.565197Z",
      "created_by": "codex",
      "updated_by": "forge-fmail-next-2",
      "body": "Build the theming/styling layer for the fmail TUI, including deterministic per-agent color assignment.\n\n## Deliverables\n- `internal/fmailtui/styles/theme.go` — Theme struct with all styled components:\n  - Base colors: background, foreground, muted, accent, border\n  - Message colors: own-message, other-message, system-message\n  - Priority colors: high (red/bold), normal (default), low (dim)\n  - Status colors: online (green), recent (yellow), stale (dim/grey)\n  - UI chrome: header, footer, breadcrumb, selected-item, scrollbar\n  - Borders: active-pane, inactive-pane, divider\n- `styles/palette_default.go` and `styles/palette_high_contrast.go` — two theme palettes\n- `styles/agent_colors.go` — deterministic agent color assignment:\n  - Hash agent name to a color from a curated palette of 12-16 distinguishable terminal colors\n  - Same agent always gets the same color across all views\n  - Colors should be ANSI 256-compatible for wide terminal support\n  - Provide both foreground and background variants\n  - Cache computed colors in a map[string]lipgloss.Style\n- `styles/message.go` — pre-built lipgloss styles for message rendering:\n  - Message header (agent name in their color + timestamp)\n  - Message body (with proper wrapping)\n  - Reply indicator (indented with vertical bar)\n  - Priority badge ([HIGH], [LOW])\n  - Tag pills ([tag1] [tag2])\n  - Unread indicator (bold/dot)\n- `styles/layout.go` — layout helpers:\n  - Responsive column widths based on terminal width\n  - Consistent padding/margin constants\n  - Panel border styles (focused vs unfocused)\n\n## Technical Notes\n- Use lipgloss from charmbracelet (already a dependency)\n- Agent color hash: fnv32a(agentName) % len(colorPalette) — simple and deterministic\n- Color palette should avoid red (reserved for high priority) and green (reserved for online status)\n- Ensure all text has sufficient contrast in both default and high-contrast themes\n- Follow existing patterns in internal/tui/styles/ but keep independent",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-09T07:57:02.159567Z",
      "started_by": "forge-fmail-dev-036",
      "closed_at": "2026-02-09T08:19:56.565197Z",
      "closed_by": "forge-fmail-next-2",
      "comments_count": 0
    },
    {
      "id": "forge-cn2",
      "title": "fmail TUI: Human Operator Console — command center for directing agents",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T07:24:25.205218Z",
      "updated_at": "2026-02-09T07:24:33.030968Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build a dedicated \"Operator Console\" view designed specifically for a human user sitting at the TUI, directing and interacting with a swarm of agents. This goes far beyond basic compose — it's the command center for a human orchestrating AI agents.\n\n## Layout — Operator Console\n```\n┌─ Operator Console ─────────────── you: tormod ───────────┐\n│                                                          │\n│  CONVERSATION with architect ─────────────────────────── │\n│  │ ● architect (15:30)                                  │\n│  │ Here's my analysis of the auth module. I found 3     │\n│  │ issues: 1) Token expiry not enforced 2) Missing      │\n│  │ refresh rotation 3) No rate limiting on login.       │\n│  │                                                      │\n│  │ ▸ you (15:32)                                        │\n│  │ Good catches. Fix #1 and #2 now, create a ticket     │\n│  │ for #3. Use single-use refresh tokens.               │\n│  │                                                      │\n│  │ ● architect (15:33)                                  │\n│  │ On it. I'll also loop in coder-1 for the refresh     │\n│  │ token implementation.                                │\n│  │                                                      │\n│  ├──────────────────────────────────────────────────────│\n│  │ QUICK ACTIONS                                        │\n│  │ [1] Broadcast to all  [2] @architect  [3] @coder-1  │\n│  │ [4] → task topic      [5] → build topic              │\n│  ├──────────────────────────────────────────────────────│\n│  │                                                      │\n│  │ > Fix the token rotation and let me know when the_   │\n│  │                                                      │\n│  │ To: @architect │ Priority: normal │ Ctrl+Enter: Send │\n│  └──────────────────────────────────────────────────────│\n│                                                          │\n│  AGENT STATUS ────────────────────────────────────────── │\n│  ● architect  \"fixing token expiry\"        ↩ 30s ago    │\n│  ● coder-1    \"implementing refresh flow\"  ↩ 1m ago     │\n│  ○ tester     \"waiting for build\"          ↩ 5m ago     │\n└──────────────────────────────────────────────────────────┘\n 1-5: quick target  Tab: switch conversation  Esc: back\n```\n\n## Deliverables\n\n### Chat-Style Conversation View\n- Shows YOUR conversation history with the currently selected agent/topic\n- Messages displayed in a familiar chat-bubble style:\n  - Your messages: right-aligned or distinct \"you\" color/style, clearly distinguished\n  - Agent messages: left-aligned with agent color\n  - Timestamps between message groups (not on every message)\n  - \"Typing...\" or \"working...\" indicator based on agent status updates\n- Conversation list sidebar (left, collapsible):\n  - All agents and topics you've interacted with, sorted by recency\n  - Unread badges per conversation\n  - Tab or number keys to switch between conversations\n  - New conversation: `n` to start composing to a new target\n- Auto-follow: conversation auto-scrolls when new messages arrive from the focused agent\n- Context display: when an agent references a topic message in a DM, show an inline preview of that message\n\n### Compose Area (Always Visible)\n- Persistent compose area at the bottom of the console — NOT a modal overlay\n- Always visible, always ready for input (like a real chat app)\n- Multi-line text area with word wrap\n- Current target shown in the compose footer: \"To: @architect\" with easy switching\n- Target switching:\n  - Number keys (1-9) for quick-access targets (most recent conversations)\n  - Tab-completion in a \"To:\" prefix if you want to change target inline\n  - `/dm architect` to switch to a specific agent\n  - `/topic task` to switch to a specific topic\n- Slash commands in the compose area:\n  - `/broadcast <msg>` — send to all active agents\n  - `/dm <agent> <msg>` — quick DM without switching context\n  - `/topic <name> <msg>` — post to a topic without switching\n  - `/status` — show all agents and their current status\n  - `/assign <agent> <task>` — send a task assignment (high priority, tagged \"assignment\")\n  - `/ask <agent> <question>` — send a question (tagged \"question\", expects reply)\n  - `/approve <msg-id>` — reply with approval (tagged \"approved\")\n  - `/reject <msg-id> <reason>` — reply with rejection (tagged \"rejected\")\n  - `/priority high|normal|low` — set priority for next message\n  - `/tag <tags...>` — set tags for next message\n- Command palette: `Ctrl+P` shows all available slash commands with descriptions\n- Send with Enter (single line) or Ctrl+Enter (multi-line mode toggle with Ctrl+M)\n\n### Quick Actions Bar\n- Horizontal bar above the compose area with numbered quick-access targets\n- Shows the 5-9 most relevant targets:\n  - Agents who recently messaged you (highest priority)\n  - Topics with recent activity\n  - Agents you recently messaged\n- Number keys 1-9 to instantly switch compose target\n- Visual indicator showing which target is currently active\n- Customizable: pin favorite targets to specific number slots (persisted)\n\n### Agent Status Ticker\n- Compact agent status bar below or beside the conversation\n- Shows all known agents with: presence dot, name, status message, last activity\n- Live-updating as agents send status updates\n- Click/select an agent to start a conversation with them\n- Visual grouping: \"active\" agents (online) at top, \"idle\" at bottom\n\n### Broadcast & Multi-Send\n- Broadcast mode: send a message to ALL active agents simultaneously\n  - Trigger with `/broadcast` or a dedicated keybinding (Ctrl+A for \"all\")\n  - Confirmation prompt: \"Send to 6 agents? [y/N]\"\n  - Each agent gets an individual DM (not a topic post)\n  - Or post to a configurable \"announcements\" topic\n- Multi-select: hold Ctrl and click/select multiple agents, compose one message sent to all\n- Group compose: create ad-hoc groups (e.g., \"frontend team\" = coder-1, coder-2, designer)\n  - `/group create frontend coder-1 coder-2 designer`\n  - `/group frontend <msg>` to message the whole group\n\n### Feedback & Approval Workflow\n- When an agent sends a message tagged \"question\" or \"needs-approval\":\n  - Message highlighted with a distinct border/badge\n  - Inline action buttons: [Approve] [Reject] [Reply]\n  - `y` to approve (sends reply tagged \"approved\")\n  - `x` to reject (opens compose for rejection reason)\n  - These appear in the notification panel AND in the conversation\n- Feedback templates:\n  - Quick reactions: `:thumbsup:`, `:thumbsdown:`, `:eyes:` — sent as short reply messages\n  - Template library: pre-written responses for common patterns\n    - \"Looks good, proceed\" / \"Hold off, let me review\" / \"Needs changes: ...\"\n  - Configurable templates in tui-state.json\n- Priority escalation: when you send a high-priority message, it gets a visual \"urgent\" treatment in the agent's view\n\n### Notification Integration\n- Unread message count per conversation shown in sidebar\n- Desktop notification (terminal bell) when an agent DMs you\n- Flash/highlight when an agent mentions your name in a topic\n- \"Waiting for reply\" indicators: if you asked a question >5m ago with no response, show a subtle reminder\n\n### Identity & Presence\n- Your identity prominently shown: \"you: tormod\" in the header\n- Set via `--agent` flag, `FMAIL_AGENT` env, or prompted on first launch\n- Your status: set with `/mystatus working on auth review` — visible to all agents\n- Auto-presence: TUI automatically registers you as an active agent while open\n  - Updates last_seen on every interaction\n  - Clears presence on exit (or marks as \"offline\")\n\n## Technical Notes\n- The operator console is a new view (not a replacement for the compose overlay)\n- It can be the DEFAULT view when launched with `fmail tui --operator` or `-o` flag\n- Conversation history: aggregated from DMs sent/received + topic messages where the user participated\n- For \"chat style\" rendering: track which messages are \"mine\" vs \"theirs\" based on FMAIL_AGENT identity\n- Quick action targets: computed from recent message history, refreshed on new messages\n- Slash command parser: split on first space, match command prefix, pass rest as args\n- Group storage: tui-state.json under a \"groups\" key: map[string][]string\n- Enter vs Ctrl+Enter: configurable in preferences, default is Enter=send for single-line\n- Auto-presence: tea.Tick every 30s to touch the agent registry file with updated last_seen\n- Broadcast: iterate over Agents() from data provider, send to each with @agent targeting",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-vbq",
      "title": "fmail TUI: Agent Roster view",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T07:04:31.604130Z",
      "updated_at": "2026-02-09T07:24:33.002338Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build the Agent Roster — a detailed view of all known agents with activity history.\n\n## Layout\n```\n┌─ Agents ─────────────────────────────── 4 known ────────┐\n│                                                          │\n│  AGENT         STATUS          HOST              SEEN    │\n│ ▸● architect   \"designing\"     build-server      now     │\n│  ○ coder-1     \"JWT auth\"      build-server      3m     │\n│  ○ reviewer    —               macbook-pro       12m    │\n│  ◌ tester      —               ci-runner         2h     │\n│                                                          │\n│──────────────────────────────────────────────────────────│\n│  architect                                               │\n│  Host: build-server                                      │\n│  First seen: 2026-02-09 08:00:00                        │\n│  Last seen: just now                                     │\n│  Status: \"designing auth flow\"                           │\n│                                                          │\n│  Activity (last 4h):                                     │\n│  ▁▂▃▅█▇▅▃▂▁▁▁▂▃▅▇█▅▃                                   │\n│                                                          │\n│  Active Topics: task (23 msgs), build (5 msgs),         │\n│                 @coder-1 (8 DMs)                        │\n│                                                          │\n│  Recent Messages:                                        │\n│  15:34 → @coder-1: Single-use refresh tokens...         │\n│  15:32 → build: run full test suite                     │\n│  15:30 → task: implement JWT auth for the...            │\n└──────────────────────────────────────────────────────────┘\n Enter: messages  s: sort  / filter  Esc back\n```\n\n## Deliverables\n- Agent list (top pane):\n  - Columns: name (colored), status message, host, last seen (relative)\n  - Presence indicators: ● online (<1m), ○ recent (<10m), ◌ stale (>10m), ✕ offline (>1h)\n  - Sort options (cycle with `s`): name, last seen, message count, host\n  - Filter by typing (fuzzy match on name/status/host)\n- Agent detail (bottom pane, shows for selected agent):\n  - Full agent record: name, host, first_seen, last_seen, status\n  - Activity sparkline: message frequency over the last N hours using braille/block characters\n    - Each column = 15 min bucket, height = message count in that bucket\n    - Shows the last 4 hours by default, adjustable with `[` and `]` keys\n  - Topic participation: list of topics this agent has sent messages to, with count\n  - Recent messages: last 10 messages from this agent across all topics\n    - Show: timestamp, target (topic or @agent), first line of body\n    - Enter on a message → jump to that message in Thread View\n- Agent unified history (Enter on an agent):\n  - Push to a new view showing ALL messages from this agent across all topics/DMs\n  - Chronological order, each message prefixed with its topic/DM target\n  - Same message rendering as Thread View but flat\n- Uptime timeline bar:\n  - Horizontal bar showing the last 24 hours\n  - Green segments where agent was active (sent messages)\n  - Grey/empty segments where agent was silent\n  - Granularity: 30-minute blocks\n\n## Technical Notes\n- Agent data comes from .fmail/agents/*.json (via data provider)\n- Message history requires scanning all topics — cache aggressively\n- Activity sparkline: use rune characters ▁▂▃▄▅▆▇█ for 8 levels of height\n- Presence thresholds should be configurable in Preferences\n- Auto-refresh agent list every 5s or on new message events",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-erz",
      "title": "Epic: fmail TUI — Live Conversation Viewer",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T07:01:23.378276Z",
      "updated_at": "2026-02-09T07:24:32.881494Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "A comprehensive TUI for watching fmail conversations in real-time and reviewing past activity. Built with Bubbletea/Lipgloss, integrating with forged for live streaming and the .fmail/ file store for historical data.\n\n## Goals\n- Real-time visibility into all agent-to-agent communication\n- Historical replay and search across all messages\n- Agent presence and activity monitoring\n- Powerful filtering, search, and navigation\n- Sequence diagram / timeline views for understanding coordination patterns\n- Composing and sending messages directly from the TUI\n\n## Phases\n1. Foundation & Core Infrastructure (P0)\n2. Core Views — Live Feed, Topics, Threads, Agents (P0-P1)\n3. Power Features — Search, Timeline, Replay, Graph (P1-P2)\n4. Operational Features — Compose, Bookmarks, Notifications (P2)\n5. UX Polish — Keybindings, Layouts, Themes, Status Bar (P2-P3)\n\n## Technical Notes\n- Use Bubbletea (charmbracelet) for TUI framework, Lipgloss for styling\n- Connect to forged via Unix socket (.fmail/forged.sock) or TCP (127.0.0.1:7463) for real-time\n- Fall back to file-based polling (100ms) in standalone mode\n- Message format: JSON files in .fmail/topics/<topic>/ and .fmail/dm/<agent>/\n- Message IDs are sortable: YYYYMMDD-HHMMSS-NNNN\n- Reply chains via reply_to field\n- Agent registry in .fmail/agents/<name>.json\n- Local TUI state (read markers, bookmarks, annotations) in .fmail/tui-state.json",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "sv-73j",
      "title": "TUI: Apply PRD status colors, borders, and focus styling",
      "status": "closed",
      "priority": "P3",
      "created_at": "2026-02-06T14:31:57.617874Z",
      "updated_at": "2026-02-09T07:12:07.526424Z",
      "updated_by": "codex",
      "body": "Implement the visual design guidance in the PRD for status semantics and pane emphasis.\\n\\nScope:\\n- Status colors: running #22C55E, waiting #F59E0B, stopped #6B7280, error #EF4444, paused #3B82F6 (if surfaced).\\n- Border guidance: left #334155, right #0EA5E9 accent, selected row bg #1E293B fg #E2E8F0 outline #38BDF8.\\n- Confirmation dialog styling: warning border #F97316 and destructive label #EF4444.\\n- Ensure status text remains visible (not color-only).\\n\\nDone when:\\n- colors/styles are consistently applied and readable in common terminal themes.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:01.151661Z",
      "closed_at": "2026-02-06T14:48:10.643177Z",
      "comments_count": 0
    },
    {
      "id": "sv-5de",
      "title": "TUI: Add expanded log mode (l) with q/esc return",
      "status": "closed",
      "priority": "P2",
      "created_at": "2026-02-06T14:31:13.986491Z",
      "updated_at": "2026-02-09T07:12:07.497972Z",
      "updated_by": "codex",
      "body": "Implement expanded log mode from PRD.\\n\\nScope:\\n- Key l enters Expanded Logs mode for selected loop.\\n- Expanded mode fills the entire right pane with live-follow log output.\\n- q or esc exits Expanded Logs and returns to Main mode layout.\\n- Preserve current loop selection while entering/exiting mode.\\n\\nDone when:\\n- user can toggle expanded logs reliably and return without losing context.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:01.094372Z",
      "closed_at": "2026-02-06T14:48:10.493639Z",
      "comments_count": 0
    },
    {
      "id": "sv-pjm",
      "title": "TUI: Implement filter mode (/) with status selector",
      "status": "closed",
      "priority": "P2",
      "created_at": "2026-02-06T14:31:41.695567Z",
      "updated_at": "2026-02-09T07:12:07.468879Z",
      "updated_by": "codex",
      "body": "Add interactive filter mode to loop list.\\n\\nScope:\\n- / enters Filter mode.\\n- Free-text filter matches name, id, and working directory path.\\n- tab cycles focus to status filter selector.\\n- Status selector options: all, running, waiting, stopped, error (plus any additional surfaced states).\\n- Filter updates results in real time.\\n- esc exits Filter mode to Main; clearing filter restores full list.\\n\\nDone when:\\n- users can quickly narrow loop list by text and status without leaving TUI.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:01.064274Z",
      "closed_at": "2026-02-06T14:48:10.582507Z",
      "comments_count": 0
    },
    {
      "id": "sv-q41",
      "title": "TUI: Build new-loop wizard (n) with forge up parity",
      "status": "closed",
      "priority": "P2",
      "created_at": "2026-02-06T14:31:47.669904Z",
      "updated_at": "2026-02-09T07:12:07.439080Z",
      "updated_by": "codex",
      "body": "Implement in-TUI new-loop wizard for n shortcut.\\n\\nScope:\\n- Step flow: (1) identity/count (2) pool/profile assignment (3) prompt/runtime options (4) review+submit.\\n- Fields: name or name-prefix, count, pool/profile (mutually exclusive), prompt, prompt-msg, interval, max-runtime, max-iterations, tags.\\n- Reuse existing forge up validation and defaults where possible.\\n- On submit success: create loop(s), refresh list, select newly created loop.\\n- On submit failure: show inline error and keep wizard open for correction.\\n\\nDone when:\\n- wizard can create valid loops without leaving TUI and handles invalid input gracefully.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:01.124153Z",
      "closed_at": "2026-02-06T14:48:10.613280Z",
      "comments_count": 0
    },
    {
      "id": "sv-p9r",
      "title": "TUI: Add automated tests for PRD interaction and action rules",
      "status": "closed",
      "priority": "P2",
      "created_at": "2026-02-06T14:32:07.737420Z",
      "updated_at": "2026-02-09T07:12:07.410334Z",
      "updated_by": "codex",
      "body": "Add/extend automated tests covering key PRD behavior for improved TUI.\\n\\nScope:\\n- Navigation tests for j/k and arrow keys with stable selection semantics.\\n- Mode transition tests: Main <-> Filter <-> Expanded Logs <-> Confirm.\\n- Destructive confirmation tests for S/K/D, including running-loop force-delete prompt.\\n- Filter behavior tests for text fields and status selector with tab.\\n- Expanded logs entry/exit tests (l then q/esc).\\n- Wizard flow tests for validation and successful loop creation path.\\n\\nDone when:\\n- test suite captures acceptance-criteria behavior and protects against regressions.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:01.181516Z",
      "closed_at": "2026-02-06T14:48:10.671315Z",
      "comments_count": 0
    },
    {
      "id": "sv-y1t",
      "title": "TUI: Cover acceptance criterion 11 (empty/error states) with tests",
      "status": "closed",
      "priority": "P2",
      "created_at": "2026-02-06T14:52:04.904892Z",
      "updated_at": "2026-02-09T07:12:07.380835Z",
      "updated_by": "codex",
      "body": "Map AC11 from PRD_TUI.md into explicit tests.\\n\\nScope:\\n- Assert empty-state messaging explains how to start a loop.\\n- Assert error rendering path is resilient and visible.\\n- Keep tests focused on non-crash behavior and operator guidance text.\\n\\nDone when:\\n- internal/looptui tests cover AC11 expectations.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:52:08.444566Z",
      "closed_at": "2026-02-06T14:54:05.793094Z",
      "comments_count": 0
    },
    {
      "id": "sv-8a1",
      "title": "TUI: Cover acceptance criterion 12 with non-TUI loop command regression tests",
      "status": "closed",
      "priority": "P2",
      "created_at": "2026-02-06T14:52:04.910619Z",
      "updated_at": "2026-02-09T07:12:07.351830Z",
      "updated_by": "codex",
      "body": "Map AC12 from PRD_TUI.md into explicit regression checks.\\n\\nScope:\\n- Add tests for existing non-TUI loop command paths (stop/kill/resume and record deletion behavior) to ensure TUI changes did not alter semantics.\\n- Keep tests command/repository level and deterministic.\\n\\nDone when:\\n- test suite includes focused regression checks and passes.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:53:57.686496Z",
      "closed_at": "2026-02-06T14:54:05.821638Z",
      "comments_count": 0
    },
    {
      "id": "sv-mz5",
      "title": "M1.4: Workflow fixtures + validation tests",
      "status": "closed",
      "priority": "P2",
      "created_at": "2026-01-20T14:22:11.498031Z",
      "updated_at": "2026-02-09T07:12:07.322665Z",
      "updated_by": "codex",
      "body": "Scope:\n- Add fixture workflows (valid + invalid).\n- Golden output for show/validate.\n- Keep fixtures small and documented.\n\nAcceptance:\n- Tests cover common error cases.\n- Fixtures used by CLI tests.",
      "epic": "sv-ksa",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-01-20T14:52:36.989204Z",
      "started_by": "codex",
      "closed_at": "2026-01-20T15:08:05.257713Z",
      "closed_by": "codex",
      "comments_count": 0
    },
    {
      "id": "sv-r4z",
      "title": "TUI: Implement two-pane layout and mode framework",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-02-06T14:30:47.093864Z",
      "updated_at": "2026-02-09T07:12:07.293486Z",
      "updated_by": "codex",
      "body": "Implement the base two-pane layout for forge tui (left loop list + right detail pane) and introduce explicit UI modes: Main, Filter, Expanded Logs, Confirm.\\n\\nScope:\\n- Replace current 2x2 card rendering with split-pane renderer.\\n- Add mode state machine and key-precedence handling (sub-mode exit with q/esc; Main retains existing quit behavior).\\n- Ensure refresh loop and rendering are stable during mode transitions.\\n\\nDone when:\\n- forge tui launches into two-pane layout.\\n- mode transitions are deterministic and test-covered.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:00.923581Z",
      "closed_at": "2026-02-06T14:48:10.377376Z",
      "comments_count": 0
    },
    {
      "id": "sv-4cr",
      "title": "TUI: Build left loop list with STATUS/ID/RUNS/DIR columns",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-02-06T14:30:57.802415Z",
      "updated_at": "2026-02-09T07:12:07.264309Z",
      "updated_by": "codex",
      "body": "Implement left-pane list rendering backed by the same loop/state semantics as forge ps.\\n\\nScope:\\n- Columns: STATUS, ID, RUNS, DIR (basename(repo_path)).\\n- Include stopped loops by default with visible stopped state.\\n- Default sort oldest-created first.\\n- Preserve selection across refresh; if selected loop disappears select nearest surviving row.\\n- Keep keyboard navigation: j/k and ArrowUp/ArrowDown.\\n\\nDone when:\\n- list matches PRD column and inclusion rules.\\n- selection behavior is stable and covered by tests.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:00.952866Z",
      "closed_at": "2026-02-06T14:48:10.438809Z",
      "comments_count": 0
    },
    {
      "id": "sv-49j",
      "title": "TUI: Implement right detail pane and adaptive log tail",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-02-06T14:31:07.968424Z",
      "updated_at": "2026-02-09T07:12:07.235317Z",
      "updated_by": "codex",
      "body": "Implement right-pane detail rendering for selected loop and conditional bottom log-tail window.\\n\\nScope:\\n- Show id, name, status, runs, full working dir, pool/profile, last run timestamp, queue depth, interval/max-runtime/max-iterations when present.\\n- When vertical space allows, render log tail sub-window with fallback text for missing/empty logs.\\n- Keep right pane synchronized with left-pane selection changes.\\n\\nDone when:\\n- detail fields update on selection change and refresh.\\n- log-tail window appears/disappears based on available height without layout breakage.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:00.981239Z",
      "closed_at": "2026-02-06T14:48:10.465882Z",
      "comments_count": 0
    },
    {
      "id": "sv-a2j",
      "title": "TUI: Wire loop action shortcuts and async action feedback",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-02-06T14:31:23.160418Z",
      "updated_at": "2026-02-09T07:12:07.203224Z",
      "updated_by": "codex",
      "body": "Implement per-selection shortcuts with responsive action execution.\\n\\nScope:\\n- Support shortcuts: S (stop), K (kill), D (delete), r (resume), l (expanded logs), n (new loop wizard).\\n- Trigger existing loop command semantics through internal control paths.\\n- Show transient success/failure status line after each action.\\n- Keep UI responsive while actions are in flight.\\n\\nDone when:\\n- all listed shortcuts execute against selected loop and provide user feedback.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:01.011031Z",
      "closed_at": "2026-02-06T14:48:10.523062Z",
      "comments_count": 0
    },
    {
      "id": "sv-gxq",
      "title": "TUI: Implement destructive confirmation flows (S/K/D)",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-02-06T14:31:29.808468Z",
      "updated_at": "2026-02-09T07:12:07.174135Z",
      "updated_by": "codex",
      "body": "Implement explicit destructive confirmation behavior from PRD.\\n\\nScope:\\n- Confirmation dialog required for S, K, D using [y/N] default No.\\n- q/esc cancel confirmation and return to Main mode.\\n- Exact confirmation copy:\\n  - S: Stop loop <id> after current iteration? [y/N]\\n  - K: Kill loop <id> immediately? [y/N]\\n  - D stopped: Delete loop record <id>? [y/N]\\n  - D running: Loop is still running. Force delete record <id>? [y/N]\\n- For D: detect loop running/non-stopped state and branch to force-delete prompt.\\n\\nDone when:\\n- destructive actions cannot run without explicit confirmation and prompt text matches PRD.",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:41:01.038375Z",
      "closed_at": "2026-02-06T14:48:10.552023Z",
      "comments_count": 0
    },
    {
      "id": "sv-pq3",
      "title": "M1.1: Workflow schema doc + example",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-01-20T14:21:34.271708Z",
      "updated_at": "2026-02-09T07:12:07.145534Z",
      "updated_by": "codex",
      "body": "Scope:\n- New doc (docs/workflows.md) describing TOML fields.\n- Example workflow file in .forge/workflows.\n- Update quickstart or README with workflow mention.\n\nAcceptance:\n- Docs explain step types + stop conditions.\n- Example validates with parser.",
      "epic": "sv-ksa",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-01-20T14:52:36.810779Z",
      "started_by": "codex",
      "closed_at": "2026-01-20T15:08:05.231870Z",
      "closed_by": "codex",
      "comments_count": 0
    },
    {
      "id": "sv-kbh",
      "title": "M1.3c: CLI workflow validate",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-01-20T14:28:43.244053Z",
      "updated_at": "2026-02-09T07:12:07.117563Z",
      "updated_by": "codex",
      "body": "Scope:\n- forge workflow validate <name>.\n- Exit non-zero on invalid.\n- JSON output includes errors.",
      "epic": "sv-ksa",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-01-20T14:52:36.963824Z",
      "started_by": "codex",
      "closed_at": "2026-01-20T15:08:05.205164Z",
      "closed_by": "codex",
      "comments_count": 0
    },
    {
      "id": "sv-tdv",
      "title": "M1.3b: CLI workflow show",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-01-20T14:28:26.131433Z",
      "updated_at": "2026-02-09T07:12:07.090003Z",
      "updated_by": "codex",
      "body": "Scope:\n- forge workflow show <name>.\n- Render normalized workflow model.\n- JSON output mode.",
      "epic": "sv-ksa",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-01-20T14:52:36.938246Z",
      "started_by": "codex",
      "closed_at": "2026-01-20T15:08:05.180110Z",
      "closed_by": "codex",
      "comments_count": 0
    },
    {
      "id": "sv-jak",
      "title": "M1.3a: CLI workflow ls",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-01-20T14:28:17.756372Z",
      "updated_at": "2026-02-09T07:12:07.061225Z",
      "updated_by": "codex",
      "body": "Scope:\n- forge workflow ls command.\n- List names + file paths.\n- JSON output mode.",
      "epic": "sv-ksa",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-01-20T14:52:36.912321Z",
      "started_by": "codex",
      "closed_at": "2026-01-20T15:08:05.154722Z",
      "closed_by": "codex",
      "comments_count": 0
    },
    {
      "id": "sv-shr",
      "title": "M1.2c: Validation error reporting",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-01-20T14:28:07.125166Z",
      "updated_at": "2026-02-09T07:12:07.032979Z",
      "updated_by": "codex",
      "body": "Scope:\n- Error formatting with path + step id.\n- Optional line/col when TOML parser provides.\n\nAcceptance:\n- CLI surfaces human-friendly errors.\n- JSON output includes error code + location.",
      "epic": "sv-ksa",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-01-20T14:52:36.887755Z",
      "started_by": "codex",
      "closed_at": "2026-01-20T15:08:05.129258Z",
      "closed_by": "codex",
      "comments_count": 0
    },
    {
      "id": "sv-6vh",
      "title": "M1.2b: Workflow validator (schema + DAG)",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-01-20T14:27:53.020571Z",
      "updated_at": "2026-02-09T07:12:07.005149Z",
      "updated_by": "codex",
      "body": "Scope:\n- Validate required fields + types.\n- Unique step ids, DAG integrity, cycles.\n\nAcceptance:\n- Invalid files return structured errors.\n- Valid files return normalized model.",
      "epic": "sv-ksa",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-01-20T14:52:36.861697Z",
      "started_by": "codex",
      "closed_at": "2026-01-20T15:08:05.103911Z",
      "closed_by": "codex",
      "comments_count": 0
    },
    {
      "id": "sv-9rt",
      "title": "M1.2a: Workflow loader",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-01-20T14:27:42.351795Z",
      "updated_at": "2026-02-09T07:12:06.976801Z",
      "updated_by": "codex",
      "body": "Scope:\n- Load .forge/workflows/*.toml.\n- Resolve workflow name + path.\n- Return raw parsed model.\n\nAcceptance:\n- Loader returns TOML parse errors with file path.\n- Supports listing workflows.",
      "epic": "sv-ksa",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-01-20T14:52:36.836483Z",
      "started_by": "codex",
      "closed_at": "2026-01-20T15:08:05.077117Z",
      "closed_by": "codex",
      "comments_count": 0
    },
    {
      "id": "sv-ksa",
      "title": "M1: Workflow spec + CLI (non-exec)",
      "status": "closed",
      "priority": "P1",
      "created_at": "2026-01-20T14:20:40.517123Z",
      "updated_at": "2026-02-09T07:12:06.948876Z",
      "updated_by": "codex",
      "body": "Goal: define workflow file format + CLI surface without execution.\n\nDeliverables:\n- .forge/workflows location + naming conventions documented.\n- Workflow schema doc (types, fields, stop conditions).\n- CLI: workflow ls/show/validate (no run).\n\nAcceptance:\n- Can parse + validate example workflow file.\n- Helpful errors on missing/invalid fields.\n- CLI commands return non-zero on invalid files.\n\nTests:\n- Unit tests for parser/validator.\n- CLI tests for ls/show/validate.",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-01-20T14:52:36.781374Z",
      "started_by": "codex",
      "closed_at": "2026-01-20T15:08:05.282600Z",
      "closed_by": "codex",
      "comments_count": 0
    },
    {
      "id": "sv-w1c",
      "title": "M10: Improve TUI",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-06T14:01:01.536492Z",
      "updated_at": "2026-02-09T07:12:06.920352Z",
      "updated_by": "codex",
      "body": "Improve the TUI for better user experience.\n",
      "project": "prj-krh6zdh0",
      "workspace_id": "4793afab-07fc-4f81-8abf-76957155133c",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-06T14:52:04.899687Z",
      "closed_at": "2026-02-06T14:54:05.851691Z",
      "comments_count": 0
    },
    {
      "id": "sv-0ze",
      "title": "M6.5: Profile catalog + mesh status reporting",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-30T05:50:49.518712Z",
      "updated_at": "2026-02-09T07:12:06.891282Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Central profile catalog (counts per harness type).\n- Instantiate canonical IDs per node (CC1, Codex1, OC1...).\n- Node reports auth status per profile (ok/expired/missing).\n- Mesh view aggregates per-node profile status.\n\nAcceptance:\n- New node can be provisioned with catalog in one command.\n- Mesh status shows where profiles exist + auth state.\n\nTests:\n- Unit tests for catalog rendering.\n- Integration test with two nodes + simulated auth status.",
      "epic": "sv-smp",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-xgk",
      "title": "M6.4: Remote registry query/update",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-30T05:50:45.535566Z",
      "updated_at": "2026-02-09T07:12:06.862940Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- API to fetch agents/prompts from remote node via master routing.\n- API to update remote registry entries (agent/prompt).\n- Authz via mesh bearer tokens.\n- CLI: forge node registry ls/show/update.\n\nAcceptance:\n- Dashboard/CLI can list remote agents/prompts.\n- Updates on remote node persist and are visible.\n\nTests:\n- Integration test with local forged mock.\n- Unit tests for routing + auth.",
      "epic": "sv-smp",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-h04",
      "title": "M6.3: Remote routing for workflow/loop",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-20T14:25:42.160283Z",
      "updated_at": "2026-02-09T07:12:06.833860Z",
      "updated_by": "codex",
      "body": "Scope:\n- Route commands to master -> node.\n- Error handling when node offline.\n\nAcceptance:\n- forge node exec runs on remote.\n- forge workflow run --node works.\n\nTests:\n- Integration test with local + simulated node.",
      "epic": "sv-smp",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-yk7",
      "title": "M6.2: Mesh registry + master selection",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-20T14:25:31.552172Z",
      "updated_at": "2026-02-09T07:12:06.796709Z",
      "updated_by": "codex",
      "body": "Scope:\n- Mesh config storage.\n- Promote/demote master (manual).\n\nAcceptance:\n- Mesh status shows active master.\n\nTests:\n- Unit tests for registry + selection.",
      "epic": "sv-smp",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-smp",
      "title": "M6: Nodes + mesh routing",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-20T14:21:20.818579Z",
      "updated_at": "2026-02-09T07:12:06.768502Z",
      "updated_by": "codex",
      "body": "Goal: multi-node orchestration with master routing.\n\nScope:\n- forged daemon: register node + accept commands.\n- Mesh registry + master selection.\n- Remote execution of workflow/loop commands.\n\nAcceptance:\n- Can register a node and run workflow remotely.\n- Master failover documented (even if manual).\n- Security: bearer token enforced for remote calls.\n\nTests:\n- Integration test with local loopback daemon.\n- Unit tests for routing decisions.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-cgj",
      "title": "M6.1: forged node daemon + registration",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-20T14:25:20.479421Z",
      "updated_at": "2026-02-09T07:12:06.740488Z",
      "updated_by": "codex",
      "body": "Scope:\n- forged API for exec + status.\n- Node registration + auth token.\n\nAcceptance:\n- Local forged accepts a loop/workflow command.\n\nTests:\n- Integration test for daemon API.",
      "epic": "sv-smp",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-8sf",
      "title": "M9.2: Team task ingestion endpoints",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-30T05:35:49.486855Z",
      "updated_at": "2026-02-09T07:12:06.712933Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- CLI: forge task send --team <id> --payload <json>.\n- Webhook: POST /teams/<id>/tasks (auth: bearer token).\n- Validation + rate limiting (basic).\n\nAcceptance:\n- Webhook creates task and returns id.\n- CLI send mirrors webhook behavior.\n\nTests:\n- Integration test for webhook task creation.\n- CLI integration test for task send.",
      "epic": "sv-6sf",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-rvs",
      "title": "M9.1: Team heartbeat + watchdog",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-30T05:35:44.483635Z",
      "updated_at": "2026-02-09T07:12:06.684739Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Heartbeat loop per team (interval from config; configurable).\n- Restart/resume behavior after crash.\n- Visibility in CLI/TUI (last heartbeat).\n\nAcceptance:\n- Heartbeat timestamps update while team active.\n- If heartbeat stale, system marks team degraded.\n\nTests:\n- Unit tests for heartbeat scheduling + stale detection.",
      "epic": "sv-6sf",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-gwp",
      "title": "M9.3: External adapter interface (Linear/Slack)",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-30T05:35:53.518488Z",
      "updated_at": "2026-02-09T07:12:06.655499Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Adapter interface for external task sources.\n- Stub adapters for Linear + Slack (no auth yet).\n- Config wiring + docs.\n\nAcceptance:\n- Adapters can emit tasks into team inbox.\n- Disabled adapters do not affect runtime.\n\nTests:\n- Unit tests for adapter interface + stub.",
      "epic": "sv-6sf",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-6sf",
      "title": "M9: Always-on teams + task ingestion",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-30T05:35:40.057897Z",
      "updated_at": "2026-02-09T07:12:06.627757Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Goal: persistent teams that stay online and ingest work continuously.\n\nScope:\n- Heartbeat + watchdog to keep teams alive.\n- Task ingestion endpoints (CLI + webhook).\n- External adapter interfaces (Linear/Slack) for future.\n\nAcceptance:\n- Team can run in always-on mode with heartbeat.\n- Tasks can be created via webhook and routed.\n\nTests:\n- Unit tests for heartbeat scheduler.\n- Integration test for webhook → team task.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-crq",
      "title": "M5.3b: Webhook auth",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:31:40.120966Z",
      "updated_at": "2026-02-09T07:12:06.599819Z",
      "updated_by": "codex",
      "body": "Scope:\n- Bearer token verification for webhook requests.\n- Config for shared secret.\n\nAcceptance:\n- Unauthorized requests rejected with 401.",
      "epic": "sv-y0b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-stt",
      "title": "M5.3c: Webhook job routing",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:31:49.862407Z",
      "updated_at": "2026-02-09T07:12:06.571566Z",
      "updated_by": "codex",
      "body": "Scope:\n- Map webhook endpoint to job name.\n- Emit job run logs + status.\n\nAcceptance:\n- Webhook triggers job and returns run id.",
      "epic": "sv-y0b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-42j",
      "title": "M5.3a: Webhook server wiring",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:31:28.302926Z",
      "updated_at": "2026-02-09T07:12:06.542850Z",
      "updated_by": "codex",
      "body": "Scope:\n- HTTP server lifecycle.\n- Route /hooks/<name> to job runner.",
      "epic": "sv-y0b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-yb2",
      "title": "M2.4: Workflow ledger entries",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:23:02.576396Z",
      "updated_at": "2026-02-09T07:12:06.514711Z",
      "updated_by": "codex",
      "body": "Scope:\n- Extend ledger format for workflow runs.\n- Include step summaries + durations.\n- Keep loop ledger unchanged for now.\n\nAcceptance:\n- Workflow run writes ledger entry per step.\n- Ledger links to run id.\n\nTests:\n- Unit test for ledger writer.",
      "epic": "sv-4xn",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-ppj",
      "title": "M5.4: CLI job/trigger commands",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:25:06.691119Z",
      "updated_at": "2026-02-09T07:12:06.486625Z",
      "updated_by": "codex",
      "body": "Scope:\n- forge job ls/show/run/logs/cancel.\n- forge trigger add/ls/rm.\n\nAcceptance:\n- CLI commands work end-to-end.\n\nTests:\n- CLI tests for job + trigger flows.",
      "epic": "sv-y0b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-jzm",
      "title": "M5.2: Trigger scheduler (cron)",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:24:46.801579Z",
      "updated_at": "2026-02-09T07:12:06.457564Z",
      "updated_by": "codex",
      "body": "Scope:\n- Cron parser + scheduler loop.\n- Trigger storage + next fire time.\n\nAcceptance:\n- Cron triggers start jobs.\n- Misconfigured cron rejected.\n\nTests:\n- Unit tests for cron parsing.",
      "epic": "sv-y0b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-y0b",
      "title": "M5: Jobs + triggers (cron/webhook)",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:21:11.638121Z",
      "updated_at": "2026-02-09T07:12:06.429359Z",
      "updated_by": "codex",
      "body": "Goal: job layer that starts workflows via triggers.\n\nScope:\n- Job definitions + persistence.\n- Trigger types: cron + webhook.\n- Job run history + logs.\n\nAcceptance:\n- Can register job and trigger it by cron or webhook.\n- Job run emits logs and status.\n- CLI to list/show/rerun jobs.\n\nTests:\n- Unit tests for trigger parsing.\n- Integration test: cron trigger fires a workflow.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-g8c",
      "title": "M5.1: Job model + persistence",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:24:37.441485Z",
      "updated_at": "2026-02-09T07:12:06.400203Z",
      "updated_by": "codex",
      "body": "Scope:\n- Define job config format.\n- Persist job runs (status, inputs, outputs).\n\nAcceptance:\n- Jobs can be created + listed.\n- Run history stored and retrievable.\n\nTests:\n- Unit tests for job store.",
      "epic": "sv-y0b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-5af",
      "title": "M4.3: Blocked status in workflow show",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:24:27.250518Z",
      "updated_at": "2026-02-09T07:12:06.372752Z",
      "updated_by": "codex",
      "body": "Scope:\n- show command displays blocked steps + reason.\n- Include timeout info.\n\nAcceptance:\n- Operators can see where to approve.\n\nTests:\n- CLI test for blocked output.",
      "epic": "sv-a5p",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-f22",
      "title": "M4.2: CLI approvals",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:24:16.157694Z",
      "updated_at": "2026-02-09T07:12:06.344800Z",
      "updated_by": "codex",
      "body": "Scope:\n- forge workflow approve/deny <run> <step>.\n- List blocked steps for a run.\n\nAcceptance:\n- Approve resumes workflow.\n- Deny stops workflow with reason.\n\nTests:\n- Integration test for approve path.",
      "epic": "sv-a5p",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-znr",
      "title": "M4.1: Human step model + persistence",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:24:03.075227Z",
      "updated_at": "2026-02-09T07:12:06.316840Z",
      "updated_by": "codex",
      "body": "Scope:\n- Add human step type fields (prompt, timeout).\n- Persist approval state + timestamps.\n- Default timeout behavior documented.\n\nAcceptance:\n- Workflow pauses at human step.\n- State survives process restart.\n\nTests:\n- Unit tests for human step state transitions.",
      "epic": "sv-a5p",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-a5p",
      "title": "M4: Human-in-loop steps + approvals",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-20T14:21:03.967801Z",
      "updated_at": "2026-02-09T07:12:06.288625Z",
      "updated_by": "codex",
      "body": "Goal: allow workflows to block on human approval.\n\nScope:\n- Step type: human (prompt + timeout).\n- Approval storage + CLI to approve/deny.\n- Workflow status shows blocked + reason.\n\nAcceptance:\n- Workflow pauses at human step and resumes on approval.\n- Timeout handling documented and tested.\n- CLI surface for approvals documented.\n\nTests:\n- Integration test with manual approval flow.\n- Unit tests for approval state transitions.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-hfy",
      "title": "M8.6: Harness autodetection + alias discovery",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:50:40.117477Z",
      "updated_at": "2026-02-09T07:12:06.260249Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Detect installed harness CLIs (codex, claude, pi, opencode, droid, amp).\n- Read alias definitions from ~/.zsh_aliases (optional: zsh -ic 'alias').\n- Map aliases to harness + profile hints.\n- Create profile stubs (no credentials).\n\nAcceptance:\n- Autodetect produces deterministic harness list + alias map.\n- Profiles can be instantiated from detection output.\n\nTests:\n- Unit tests with fixture alias files.\n- Integration test on a system with at least one harness present.",
      "epic": "sv-rp2",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-dj9",
      "title": "M7.4: CLI/TUI for teams + tasks",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:34:37.887859Z",
      "updated_at": "2026-02-09T07:12:06.233107Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- CLI: forge team ls|new|rm|show.\n- CLI: forge team member add|rm|ls.\n- CLI: forge task send|ls|show|assign|retry.\n- TUI views: teams list + task inbox (read-only ok v1).\n\nAcceptance:\n- Operators can create team and send task via CLI.\n- CLI shows task status + assignee.\n- TUI shows team summary + queue counts.\n\nTests:\n- CLI integration tests for team/task flows.\n- TUI snapshot test (if infra exists).",
      "epic": "sv-x6b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-xdr",
      "title": "M7.3: Delegation rules engine",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:34:31.639360Z",
      "updated_at": "2026-02-09T07:12:06.205285Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Rule schema (match on payload.type, tags, repo, priority, paths).\n- Rule evaluation order + fallbacks (leader/default).\n- Deterministic routing + explain output.\n- Config stored per team.\n\nAcceptance:\n- Given a task payload, engine returns target agent/prompt (optional).\n- Rule conflicts resolved deterministically.\n- CLI can show why a task was routed.\n\nTests:\n- Unit tests for rule parsing + evaluation.\n- Golden tests for explain output.",
      "epic": "sv-x6b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-4tb",
      "title": "M7.2: Team task inbox + assignment lifecycle",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:34:26.875825Z",
      "updated_at": "2026-02-09T07:12:06.177924Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Task model (id, team_id, payload json, status, assigned_agent_id, timestamps).\n- Payload schema (type/title/body/priority + optional repo/tags/workflow/inputs/routing_hint/meta).\n- Statuses: queued|assigned|running|blocked|done|failed|canceled.\n- FIFO ordering + explicit priority field.\n- TaskService APIs: submit, assign, reassign, complete, fail.\n\nAcceptance:\n- Can submit task to team and list queue.\n- Assign/reassign updates status + audit trail.\n- Task state persists across restarts.\n\nTests:\n- Unit tests for state transitions.\n- Repo tests for task ordering + filters.",
      "epic": "sv-x6b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-4wf",
      "title": "M8.5: Central registry store + export/import",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:50:36.113783Z",
      "updated_at": "2026-02-09T07:12:06.151101Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Registry store at ~/.forge/registry (agents + prompts).\n- Repo export/import at .forge/registry for sharing.\n- CLI: forge registry export|import|status.\n- Conflict handling (local vs repo preference).\n\nAcceptance:\n- Export writes commit-friendly files.\n- Import updates local registry without breaking running workflows.\n\nTests:\n- Unit tests for export/import.\n- CLI tests for status/export/import.",
      "epic": "sv-rp2",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-eaa",
      "title": "M8.2: Prompt spec + selection rules",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:35:13.186016Z",
      "updated_at": "2026-02-09T07:12:06.123609Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Define prompt schema (id, name, system prompt, metadata).\n- Prompt selection rules (explicit id or match on task metadata).\n- File location: .forge/prompts/*.md (document).\n- Loader + validator for prompts + rules.\n\nAcceptance:\n- Prompt files validate and normalize.\n- Selection picks prompt deterministically.\n\nTests:\n- Unit tests for rule parsing + matching.\n- Golden tests for precedence edge cases.",
      "epic": "sv-rp2",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-ymy",
      "title": "M8.4: CLI for agents/prompts",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:35:21.546450Z",
      "updated_at": "2026-02-09T07:12:06.096667Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- forge agent ls/show/validate.\n- forge prompt ls/show/validate.\n- JSON output + errors.\n\nAcceptance:\n- CLI lists and shows resolved definitions.\n- validate exits non-zero on invalid files.\n\nTests:\n- CLI tests for list/show/validate.",
      "epic": "sv-rp2",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-3kj",
      "title": "M8.3: Workflow step resolution (agent+prompt registry)",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:35:17.458885Z",
      "updated_at": "2026-02-09T07:12:06.069447Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Allow workflow steps to reference agent/prompt by id.\n- Resolve defaults via autodetection when not specified.\n- Validation: missing ids produce clear errors.\n\nAcceptance:\n- Workflow run resolves agent+prompt deterministically.\n- Errors point to missing/invalid references.\n\nTests:\n- Integration test: workflow with prompt id runs.\n- Unit tests for resolution logic.",
      "epic": "sv-rp2",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-z2n",
      "title": "M8.1: Agent profile spec + loader",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:35:08.302381Z",
      "updated_at": "2026-02-09T07:12:06.042899Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Define agent profile schema (id, name, harness, defaults).\n- File location: .forge/agents/*.md or *.yaml (decide + document).\n- Loader + validator with helpful errors.\n- Registry API for lookup by id.\n\nAcceptance:\n- Invalid profiles rejected with clear errors.\n- Registry returns normalized profile for id.\n\nTests:\n- Unit tests for parsing + validation.\n- Fixture tests for invalid cases.",
      "epic": "sv-rp2",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-rp2",
      "title": "M8: Agent profiles + prompt registry/autodetection",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:35:03.316477Z",
      "updated_at": "2026-02-09T07:12:06.016889Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Goal: first-class agent + prompt definitions with autodetection.\n\nScope:\n- File formats + loaders + validators.\n- Registry APIs for lookup by id.\n- Autodetection rules for selecting prompts/profiles.\n- CLI surfaces for list/show/validate.\n\nAcceptance:\n- Repo can define agents + prompts and reference by id.\n- Autodetection selects prompt/profile deterministically.\n- CLI shows registry contents.\n\nTests:\n- Unit tests for parsing + rule evaluation.\n- CLI tests for list/show/validate.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-fky",
      "title": "M7.1: Team model + persistence",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:34:22.840169Z",
      "updated_at": "2026-02-09T07:12:05.990962Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Define Team, TeamMember, TeamRole (leader|member) structs.\n- Persist teams + members (migrations + repo).\n- Team config (delegation rules, default assignee, heartbeat interval).\n- TeamService CRUD APIs.\n\nAcceptance:\n- Create/list/show/delete team works.\n- Members + roles stored and retrievable.\n- Team config validated on write.\n\nTests:\n- Unit tests for model validation.\n- Repo tests for create/list/load/delete.",
      "epic": "sv-x6b",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-x6b",
      "title": "M7: Teams + task delegation",
      "status": "open",
      "priority": "P3",
      "created_at": "2026-01-30T05:34:15.493788Z",
      "updated_at": "2026-02-09T07:12:05.965384Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Goal: persistent teams of agents with task delegation rules.\n\nScope:\n- Team + member + role model.\n- Task inbox + assignment lifecycle.\n- Delegation rules engine.\n- CLI/TUI surfaces for teams + tasks.\n- Agent messaging integration (fmail).\n\nAcceptance:\n- Can create team, add members, send task to team.\n- Task routed to an agent using rules.\n- Team/task status visible in CLI.\n\nTests:\n- Unit tests for model + delegation.\n- CLI tests for team/task flows.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-bsc",
      "title": "M3.4c: Fan-out status display",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:31:17.137678Z",
      "updated_at": "2026-02-09T07:12:05.938935Z",
      "updated_by": "codex",
      "body": "Scope:\n- Report per-step running/queued counts.\n- Show in workflow logs/show.",
      "epic": "sv-djr",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-ped",
      "title": "M3.4a: Parallel scheduler core",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:30:38.080692Z",
      "updated_at": "2026-02-09T07:12:05.911704Z",
      "updated_by": "codex",
      "body": "Scope:\n- Scheduler to run ready steps concurrently.\n- Respect dependencies + step limits.\n\nAcceptance:\n- Parallel steps run concurrently; failures stop dependents.",
      "epic": "sv-djr",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-ce4",
      "title": "M3.1b: Stop tool runner",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:30:18.502331Z",
      "updated_at": "2026-02-09T07:12:05.882713Z",
      "updated_by": "codex",
      "body": "Scope:\n- Run tool/command for stop condition.\n- Map exit status/output to true/false.\n\nAcceptance:\n- Tool failures are surfaced cleanly.",
      "epic": "sv-djr",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-qxz",
      "title": "M3.1c: Loop stop integration",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:30:28.990302Z",
      "updated_at": "2026-02-09T07:12:05.849486Z",
      "updated_by": "codex",
      "body": "Scope:\n- Apply stop conditions in loop step executor.\n- Stop on true condition + record reason.\n\nAcceptance:\n- Loop stops and marks step success when condition met.",
      "epic": "sv-djr",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-88c",
      "title": "M3.1a: Stop expr parser/eval",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:30:08.367743Z",
      "updated_at": "2026-02-09T07:12:05.817346Z",
      "updated_by": "codex",
      "body": "Scope:\n- Minimal expression language for stop conditions.\n- Implement eval with workflow context.\n\nAcceptance:\n- Supports count(tasks.open) comparisons.",
      "epic": "sv-djr",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-r50",
      "title": "M2.3b: CLI workflow logs",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:29:40.869674Z",
      "updated_at": "2026-02-09T07:12:05.790116Z",
      "updated_by": "codex",
      "body": "Scope:\n- forge workflow logs <run-id>.\n- Show per-step logs.\n\nAcceptance:\n- Logs are readable and ordered.",
      "epic": "sv-4xn",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-waq",
      "title": "M2.3a: CLI workflow run",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:29:24.702273Z",
      "updated_at": "2026-02-09T07:12:05.762213Z",
      "updated_by": "codex",
      "body": "Scope:\n- forge workflow run <name>.\n- Return run id + status.\n\nAcceptance:\n- Runs a simple sequential workflow.",
      "epic": "sv-4xn",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-xw8",
      "title": "M3.4b: Concurrency config",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:30:48.030346Z",
      "updated_at": "2026-02-09T07:12:05.733429Z",
      "updated_by": "codex",
      "body": "Scope:\n- Config for max parallel steps (global + per workflow).\n- Surface in docs and CLI show.",
      "epic": "sv-djr",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-1m6",
      "title": "M3.3: Step/workflow hooks",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:23:38.188049Z",
      "updated_at": "2026-02-09T07:12:05.702322Z",
      "updated_by": "codex",
      "body": "Scope:\n- Pre/post hooks on workflow + step.\n- Hook types: bash initially.\n- Hook failures configurable (fail|warn).\n\nAcceptance:\n- Hooks run in order and log output.\n- Fail mode stops workflow.\n\nTests:\n- Integration test with pre/post hooks.",
      "epic": "sv-djr",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-djr",
      "title": "M3: Stop conditions, inputs/outputs, hooks, fan-out",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:20:56.376997Z",
      "updated_at": "2026-02-09T07:12:05.671946Z",
      "updated_by": "codex",
      "body": "Goal: add richer workflow semantics without triggers or mesh.\n\nScope:\n- Stop conditions (expr/tool/loop count).\n- Step inputs/outputs binding.\n- Pre/post hooks on steps + workflow.\n- Fan-out with fixed concurrency limit.\n\nAcceptance:\n- Stop conditions can end loops deterministically.\n- Outputs flow into downstream step inputs.\n- Hooks run and are logged.\n- Fan-out executes in parallel with bounded concurrency.\n\nTests:\n- Unit tests for stop evaluation + IO binding.\n- Integration test for fan-out execution order.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-d0h",
      "title": "M3.2: Inputs/outputs binding",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:23:23.446922Z",
      "updated_at": "2026-02-09T07:12:05.643417Z",
      "updated_by": "codex",
      "body": "Scope:\n- Define input/output mapping in workflow structs.\n- Resolve outputs into downstream inputs.\n- Support simple templating (e.g., {{steps.id.output}}).\n\nAcceptance:\n- Downstream step receives upstream outputs.\n- Missing output yields clear error.\n\nTests:\n- Unit tests for binding + error cases.",
      "epic": "sv-djr",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-1v3",
      "title": "M2.3c: Workflow run persistence",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:29:56.061516Z",
      "updated_at": "2026-02-09T07:12:05.615678Z",
      "updated_by": "codex",
      "body": "Scope:\n- Persist workflow run metadata + step status.\n- Allow resuming/log lookup by id.\n\nAcceptance:\n- Run id is stable and retrievable.",
      "epic": "sv-4xn",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-7kr",
      "title": "M2.2c: Loop step executor",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:29:12.663500Z",
      "updated_at": "2026-02-09T07:12:05.587761Z",
      "updated_by": "codex",
      "body": "Scope:\n- Execute loop step by reusing loop runner.\n- Track loop iteration count + stop status.\n\nAcceptance:\n- Loop step runs until stop condition or max iterations.",
      "epic": "sv-4xn",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-51a",
      "title": "M2.2b: Bash step executor",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:29:02.560936Z",
      "updated_at": "2026-02-09T07:12:05.559642Z",
      "updated_by": "codex",
      "body": "Scope:\n- Execute bash step in repo workdir.\n- Capture stdout/stderr + exit code.\n\nAcceptance:\n- Bash step logs are stored and viewable.",
      "epic": "sv-4xn",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-md5",
      "title": "M2.2a: Agent step executor",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:28:53.132406Z",
      "updated_at": "2026-02-09T07:12:05.531879Z",
      "updated_by": "codex",
      "body": "Scope:\n- Execute agent step using existing harness runner.\n- Capture stdout/stderr + exit status.\n\nAcceptance:\n- Agent step produces step output + logs.",
      "epic": "sv-4xn",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-r1c",
      "title": "M2.1: Workflow engine (sequential DAG)",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:22:23.526943Z",
      "updated_at": "2026-02-09T07:12:05.503854Z",
      "updated_by": "codex",
      "body": "Scope:\n- Build workflow execution engine with topo sort.\n- Track step state (pending/running/success/failed).\n- Persist run metadata (id, timestamps, errors).\n\nAcceptance:\n- Deterministic step order for simple DAG.\n- Failure stops downstream steps.\n\nTests:\n- Unit tests for topo ordering + failure propagation.",
      "epic": "sv-4xn",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "sv-4xn",
      "title": "M2: Workflow runner (sequential, minimal steps)",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-01-20T14:20:47.988694Z",
      "updated_at": "2026-02-09T07:12:05.472929Z",
      "updated_by": "codex",
      "body": "Goal: execute workflows sequentially with minimal step types.\n\nScope:\n- Step types: agent, bash, loop.\n- Sequential DAG execution (topo order), no fan-out.\n- Basic run log + step status persisted.\n\nAcceptance:\n- forge workflow run executes a simple workflow end-to-end.\n- Step failures stop workflow with clear error.\n- Logs show per-step start/stop + duration.\n\nTests:\n- Unit tests for DAG order.\n- Integration test: run sample workflow with bash steps.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-by0",
      "title": "fmail TUI: Theme support and message rendering polish",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T07:11:10.071642Z",
      "updated_at": "2026-02-09T07:11:49.766793Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Polish the visual rendering of messages and ensure full theme support across all views.\n\n## Deliverables\n\n### Message Rendering Excellence\n- Message card rendering:\n  - Styled box with agent-colored left border (2px/chars)\n  - Header: \"agent-name\" (bold, in agent color) + \"· 2m ago\" (muted) — or full timestamp on focus\n  - Priority badge inline: [HIGH] in red, [LOW] in dim — only shown for non-normal priority\n  - Tag pills: [auth] [urgent] — each in a subtle rounded-corner style (if terminal supports)\n  - Reply indicator: \"↩ replying to agent-name\" in muted text above the body\n  - Body: word-wrapped to available width, with proper Unicode handling\n  - Code blocks (``` fenced): rendered with a distinct background color and monospace indicator\n  - Inline code (`backtick`): subtle background highlight\n  - URLs: underlined (if terminal supports)\n  - Long messages (>10 lines): truncated with \"[+15 more lines]\" — expandable with Enter\n  - Unread messages: bold left border + accent dot\n  - Bookmarked messages: ★ indicator in the header\n  - Annotated messages: 📌 note shown below the body in a different-colored box\n\n### Theme System\n- Two complete themes:\n  - Default: dark background assumed, vibrant colors, subtle borders\n  - High contrast: bright colors on pure black, thick borders, increased spacing\n- Theme switching: `Ctrl+T` cycles themes, or set in preferences\n- Each theme defines:\n  - Primary, secondary, accent, muted, error, warning, success colors\n  - Background and foreground defaults\n  - Border style (rounded, sharp, double, hidden)\n  - Agent color palette (12-16 colors, different per theme for contrast)\n  - Priority color mapping\n  - Status color mapping\n- All views must respect the active theme — no hardcoded colors anywhere\n- Theme-aware rendering helpers:\n  ```go\n  func (t Theme) MessageCard(msg fmail.Message, selected bool, compact bool) string\n  func (t Theme) AgentBadge(name string, status AgentStatus) string\n  func (t Theme) TopicPill(name string, heat HeatLevel) string\n  func (t Theme) PriorityBadge(priority string) string\n  func (t Theme) TagPill(tag string) string\n  func (t Theme) Timestamp(t time.Time, relative bool) string\n  func (t Theme) Sparkline(values []float64, width int) string\n  ```\n\n### Rendering Optimizations\n- Memoize rendered message cards: cache the rendered string keyed by (messageID, width, selected, theme)\n- Invalidate cache on: theme change, terminal resize, selection change\n- Viewport virtualization: only render messages visible in the scroll window + 10 buffer\n- Batch re-renders: coalesce multiple state changes into a single re-render (max 1 per 50ms)\n- Diff rendering: where possible, only re-render changed portions\n\n### Special Character Support\n- Box-drawing characters: ─│┌┐└┘├┤┬┴┼ for borders and tree connectors\n- Block characters: ░▒▓█ for heatmaps and activity bars\n- Braille: ⠁⠂⠄⡀⠈⠐⠠⢀ for high-resolution sparklines\n- Unicode arrows: → ← ↑ ↓ ↩ ↔ for navigation and flow indicators\n- Graceful fallback: detect terminal capability, fall back to ASCII (+-|) if Unicode unsupported\n\n## Technical Notes\n- Use lipgloss.NewStyle().Foreground/Background/Bold/Italic for all styling\n- Agent colors: precomputed and cached in a global AgentColorCache\n- Word wrapping: use lipgloss.Width() for proper Unicode width calculation\n  - CJK characters, emoji, etc. may be double-width\n- Code block detection: scan for ``` in message body, render content between with CodeBlockStyle\n- Truncation: count rendered lines (not bytes/chars), truncate at line boundary\n- Theme hot-reload: changing theme should re-render all cached content (flush render cache)",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-537",
      "title": "fmail TUI: Connection status bar and system indicators",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T07:10:39.839773Z",
      "updated_at": "2026-02-09T07:11:49.712535Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build the persistent status bar showing connection state, throughput, and system indicators.\n\n## Layout\n```\n┌──────────────────────────────────────────────────────────┐\n│  fmail TUI │ project: forge │ agent: tui-viewer          │ <- header\n│                                                          │\n│  ... (active view content) ...                           │\n│                                                          │\n│ ● forged:connected │ 12 msg/m │ 6 agents │ 🔔 3 │ 15:34 │ <- status bar\n└──────────────────────────────────────────────────────────┘\n```\n\n## Deliverables\n- Header bar:\n  - Left: \"fmail TUI\" branding + current view name breadcrumb\n  - Center: project name (from .fmail/project.json or FMAIL_PROJECT)\n  - Right: agent identity (who am I in fmail) + clock (HH:MM)\n  - Styled with theme accent color, bold\n- Status bar (bottom):\n  - Connection indicator:\n    - `● connected` (green) — connected to forged via socket, real-time delivery active\n    - `◐ polling` (yellow) — standalone mode, polling every N ms\n    - `✕ disconnected` (red) — was connected to forged but lost connection\n    - `↻ reconnecting` (yellow, blinking) — attempting to reconnect to forged\n    - Show the connection method: \"unix:.fmail/forged.sock\" or \"tcp:127.0.0.1:7463\" or \"file:100ms\"\n  - Message throughput:\n    - Rolling messages-per-minute counter\n    - Format: \"12 msg/m\" or \"0 msg/m\"\n    - Sparkline of last 10 minutes if space allows: \"12 msg/m ▁▂▃▅▇\"\n  - Agent count:\n    - \"6 agents\" — count of agents seen in the last 10 minutes\n    - Click/keybinding to jump to Agent Roster\n  - Notification badge:\n    - \"🔔 3\" or \"[N:3]\" — unread notification count\n    - Highlighted/bold when count >0\n    - Hidden when count =0\n  - Clock:\n    - Current time HH:MM, updates every minute\n    - Useful for correlating with message timestamps\n  - Disk usage (optional, shown if space):\n    - \".fmail: 2.3MB\" — total size of the .fmail directory\n    - Warning indicator if >100MB\n- Reconnection behavior:\n  - If forged connection drops, immediately switch to file-based polling\n  - Attempt reconnection every 5 seconds (with exponential backoff up to 60s)\n  - On successful reconnect, switch back to socket mode\n  - Show reconnection attempt count: \"↻ reconnecting (attempt 3/10)\"\n  - After max attempts, stay in polling mode and show \"✕ disconnected (using file polling)\"\n- Breadcrumb trail:\n  - In the header, show the navigation path: \"Dashboard > Topics > task\"\n  - Clickable breadcrumbs (or navigable with Ctrl+← to go up a level)\n  - Based on the view stack\n- Pane-aware status:\n  - In split/dashboard mode, status bar spans the full width\n  - Active pane indicator in the status bar\n  - Header shows the focused pane's breadcrumb\n\n## Technical Notes\n- Status bar rendered as a single lipgloss.Render() call with JoinHorizontal for segments\n- Each segment has a min-width; hide optional segments (disk usage, sparkline) if terminal too narrow\n- Priority order for space allocation: connection > throughput > agents > notifications > clock > disk\n- Message throughput: ring buffer of 600 timestamps (10 minutes at 1/sec resolution)\n  - Count entries in last 60s for msg/min\n- Connection monitoring: goroutine that pings forged every 5s, updates connection state\n  - Use tea.Cmd to send connection state changes to the Bubbletea model\n- Clock: tea.Tick every 60 seconds to update the time display\n- Sparkline in status bar: 10 characters, each representing 1 minute of the last 10 minutes\n  - Height proportional to message count in that minute",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-c0p",
      "title": "fmail TUI: Layout modes (single, split, dashboard, zen)",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T07:10:10.871567Z",
      "updated_at": "2026-02-09T07:11:49.656912Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Implement configurable layout modes for different workflows and screen sizes.\n\n## Layout Modes\n\n### Single Pane (default for narrow terminals)\n```\n┌──────────────────────────────┐\n│         Active View          │\n│         (full width)         │\n│                              │\n│                              │\n└──────────────────────────────┘\n```\n- One view fills the entire terminal\n- Navigate between views with number keys or breadcrumbs\n- Best for terminals <100 cols\n\n### Split Pane (default for wide terminals)\n```\n┌──────────────┬───────────────┐\n│  Left Pane   │  Right Pane   │\n│  (list/nav)  │  (detail)     │\n│              │               │\n│              │               │\n└──────────────┴───────────────┘\n```\n- Left: navigation (topic list, agent list, search results)\n- Right: detail (thread view, message preview, agent detail)\n- Tab to switch focus between panes\n- Drag divider with mouse (or `|` key to adjust split ratio)\n- Split ratio: 30/70 default, adjustable in 10% increments\n- Left pane can be collapsed with `Ctrl+\\`\n\n### Dashboard (multi-pane grid)\n```\n┌──────────────┬───────────────┐\n│  Agents      │  Live Feed    │\n│              │               │\n├──────────────┼───────────────┤\n│  Topics      │  Stats/Graph  │\n│              │               │\n└──────────────┴───────────────┘\n```\n- 2x2 grid showing 4 views simultaneously\n- Each quadrant shows a compact version of a view\n- Configurable: choose which view goes in each quadrant\n  - Press `Ctrl+1` through `Ctrl+4` to change quadrant content\n  - Dropdown menu with available views\n- Focus one quadrant with Tab, Enter to expand to full screen\n- Grid sizes: 2x1 (two rows), 1x2 (two cols), 2x2, 1x3, 3x1\n- Configure with `Ctrl+G` (grid layout selector)\n\n### Zen Mode\n```\n┌──────────────────────────────┐\n│                              │\n│    (just the message stream  │\n│     no chrome, no borders,   │\n│     no status bar)           │\n│                              │\n└──────────────────────────────┘\n```\n- Minimal: only the message content, no UI chrome\n- No header, no footer, no borders\n- Just the live feed or current thread\n- Keybindings still work, `?` still shows help\n- Toggle with `Ctrl+Z` or `z` then `z` (like vim zen mode)\n\n## Deliverables\n- Layout manager:\n  - `internal/fmailtui/layout/layout.go`\n  - LayoutMode enum: Single, Split, Dashboard, Zen\n  - LayoutManager struct: manages pane arrangement, sizes, and focus\n  - Pane struct: {ViewID, X, Y, Width, Height, Focused bool}\n  - Responsive: auto-switch from Split to Single when terminal width <100\n  - Auto-switch from Dashboard to Split when terminal width <140\n- Split pane controls:\n  - Tab: cycle focus\n  - `|` or `Ctrl+W` then `+`/`-`: adjust split ratio\n  - `Ctrl+W` then `h`/`l`: move focus left/right\n  - `Ctrl+W` then `j`/`k`: move focus up/down (in dashboard mode)\n  - `Ctrl+W` then `o`: expand focused pane to full screen (toggle)\n- Layout persistence:\n  - Save current layout mode and pane arrangement in tui-state.json\n  - Restore on next launch\n  - Default layout preference configurable in Preferences\n- View rendering:\n  - Each view implements a `Render(width, height int) string` method\n  - Views adapt their rendering to the available space:\n    - Compact mode: abbreviated columns, shorter previews, no decorative borders\n    - Full mode: all columns, full previews, styled borders\n  - Each view reports a minimum size (e.g., Thread View needs at least 40 cols)\n  - If pane smaller than minimum, show a \"pane too small\" placeholder\n\n## Technical Notes\n- Layout computation: given terminal (W, H), compute pane rectangles\n- Split ratio stored as float64 (0.0-1.0), default 0.35 for left pane\n- Dashboard grid: divide available space equally, with 1-char borders between panes\n- Zen mode: simply render the active view at full terminal size with no chrome\n- Responsive breakpoints: configurable but defaults at 80/100/140 columns\n- Mouse support (optional, Bubbletea supports it): click to focus pane, drag divider\n- Rendering order: render each pane independently, then compose with lipgloss.JoinHorizontal/Vertical",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-sd5",
      "title": "fmail TUI: Vim-style keybindings and contextual help",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T07:09:41.092335Z",
      "updated_at": "2026-02-09T07:11:49.572827Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Implement comprehensive vim-style keybindings with a contextual help overlay.\n\n## Deliverables\n- Global keybindings (active in all views):\n  - `q` / `Ctrl+C`: quit (with confirmation if compose draft exists)\n  - `Esc`: back (pop view stack) / close overlay / cancel current action\n  - `?`: toggle contextual help overlay\n  - `1-9`: quick-switch to view by number (1=Dashboard, 2=Topics, 3=Agents, etc.)\n  - `/`: open search\n  - `Ctrl+N`: notifications panel\n  - `Ctrl+B`: bookmarks panel\n  - `:`: quick-send command bar\n  - `Tab` / `Shift+Tab`: cycle between panes in split views\n  - `Ctrl+L`: force redraw (clear and re-render)\n  - `Ctrl+R`: force refresh data from store\n- Navigation keybindings (active in list/scrollable views):\n  - `j` / `↓`: move down\n  - `k` / `↑`: move up\n  - `h` / `←`: move left / collapse / back\n  - `l` / `→`: move right / expand / enter\n  - `g` then `g`: go to top (vim gg)\n  - `G`: go to bottom\n  - `Ctrl+D`: half-page down\n  - `Ctrl+U`: half-page up\n  - `Ctrl+F` / `PgDn`: full page down\n  - `Ctrl+B` / `PgUp`: full page up (note: conflicts with bookmarks — use Ctrl+B only when not in a scrollable context)\n  - `n` / `N`: next/previous search result\n  - `Enter`: select / open / expand\n  - `Space`: toggle selection / pause-resume in Live Tail\n- View-specific keybindings:\n  - Thread View: `r` reply, `R` DM reply, `b` bookmark, `B` bookmark+note, `a` annotate, `f` flat/threaded toggle\n  - Topic Browser: `s` sort, `*` star, `d` toggle DMs, `n` new message\n  - Agent Roster: `s` sort, `[`/`]` adjust time range\n  - Timeline: `+`/`-` zoom, `s` swim-lane toggle, `n` jump to now, `t` jump to time\n  - Live Tail: `Space` pause/resume, `f` filter, `h` highlight, `c` clear filter\n  - Stats: `[`/`]` adjust time range, `r` refresh\n  - Replay: `Space` play/pause, `1-4` speed, `←`/`→` skip, `m` mark, `'` jump to mark\n- Contextual help overlay:\n  - Press `?` to toggle\n  - Semi-transparent overlay showing keybindings for the CURRENT view\n  - Organized by category: Navigation, Actions, View-specific\n  - Shows key + description in two columns\n  - Dismiss with `?` again, `Esc`, or any action key\n  - At the bottom: \"Global: q quit | / search | ? help | 1-9 views\"\n- Key conflict resolution:\n  - View-specific bindings take priority over global when in that view\n  - Navigation bindings take priority over global in scrollable views\n  - Document all conflicts and their resolution in code comments\n- Keybinding configuration (future, but design for it now):\n  - All keybindings defined in a central keymap struct\n  - Easy to override from a config file in the future\n\n## Technical Notes\n- Bubbletea key handling: match on tea.KeyMsg in Update()\n- For multi-key sequences (gg): implement a pending-key state\n  - On `g`: set pendingKey='g', start a 500ms timer\n  - On second `g` within timeout: execute gg action\n  - On timeout or different key: cancel pending\n- For key categories, create a KeyMap struct:\n  ```go\n  type KeyMap struct {\n      Quit      key.Binding\n      Back      key.Binding\n      Help      key.Binding\n      Search    key.Binding\n      // ... etc\n  }\n  ```\n- Use charmbracelet/bubbles/key for binding definitions\n- Help overlay: render as a lipgloss-styled box centered on screen with 50% opacity effect (dim background)\n- Test all keybindings on macOS Terminal, iTerm2, and common Linux terminals",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-0as",
      "title": "fmail TUI: Notifications panel and rules engine",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T07:09:09.346072Z",
      "updated_at": "2026-02-09T07:11:49.517533Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build a notification system with configurable rules for alerting on important messages.\n\n## Layout — Notifications Panel\n```\n┌─ Notifications ──────────────── 3 unread ────────────────┐\n│                                                          │\n│  ● 15:34 HIGH — architect → @coder-1                    │\n│    Single-use refresh tokens...                          │\n│                                                          │\n│  ● 15:32 RULE \"auth-watch\" — architect → task           │\n│    implement JWT auth...                                 │\n│                                                          │\n│  ○ 15:20 RULE \"build-alerts\" — tester → build           │\n│    test suite failed: 3 failures in auth/...             │\n│                                                          │\n│  ○ 14:55 HIGH — deployer → deploy                       │\n│    production deployment starting...                     │\n│                                                          │\n│──────────────────────────────────────────────────────────│\n│  RULES (4 active)                                        │\n│  ✓ \"high-priority\" — priority:high → bell + highlight   │\n│  ✓ \"auth-watch\" — tag:auth → highlight                  │\n│  ✓ \"build-alerts\" — topic:build from:tester → bell      │\n│  ✗ \"deploy-dm\" — to:@deployer → bell (disabled)         │\n│                                                          │\n└──────────────────────────────────────────────────────────┘\n Enter: go to msg  n: new rule  e: edit rule  d: delete  Esc back\n```\n\n## Deliverables\n- Notification panel:\n  - Accessible via `Ctrl+N` or notification badge on the dashboard\n  - Lists messages that matched notification rules, sorted by recency\n  - Unread notifications marked with ● (read with ○)\n  - Each shows: time, rule that matched (or \"HIGH\" for priority-based), sender → target, preview\n  - Enter on a notification → jump to that message in Thread View\n  - `c` to clear all notifications, `x` to dismiss one\n  - Badge on dashboard: shows unread notification count (e.g., \"[3]\" next to the Notifications keybinding)\n- Notification rules:\n  - Each rule has:\n    - Name: user-defined label\n    - Conditions (all must match):\n      - topic: glob pattern for topic name\n      - from: glob pattern for sender agent\n      - to: glob pattern for target\n      - priority: minimum priority (high, normal, low)\n      - tags: required tags (any of the listed tags must be present)\n      - text: regex pattern to match in message body\n    - Actions:\n      - highlight: bold the message in all views\n      - bell: terminal bell (BEL character)\n      - flash: briefly invert header bar colors\n      - badge: increment notification badge on dashboard\n    - Enabled: boolean toggle\n  - Default rules (created on first run):\n    - \"high-priority\": matches priority:high, actions: bell + highlight + badge\n    - \"direct-messages\": matches messages sent to the TUI's own agent, actions: badge + highlight\n- Rule editor:\n  - Press `n` for new rule, `e` to edit selected rule\n  - Form with fields for each condition and action\n  - Toggle conditions on/off (not all are required)\n  - Test button: \"Run this rule against the last 100 messages\" to preview matches\n- Notification processing:\n  - On each new message (from Subscribe()), evaluate all enabled rules\n  - If any rule matches, trigger its actions\n  - Store matched notifications in memory (last 200) and in tui-state.json (last 50)\n- Global notification indicator:\n  - In ALL views, the footer bar shows notification count if >0\n  - Format: \"🔔 3\" or \"[N:3]\" in the status bar\n  - Clicking/pressing the notification keybinding opens the panel\n\n## Technical Notes\n- Rule evaluation: for each message, iterate rules and check conditions\n  - Short-circuit: if any condition fails, skip to next rule\n  - Glob matching: use filepath.Match for topic/from/to patterns\n  - Text matching: compile regex once on rule create, apply on each message\n- Performance: rule evaluation must be <1ms per message (evaluate synchronously in Subscribe handler)\n- Terminal bell: write '\\a' to stdout (tea.Println or raw write)\n- Flash effect: set a timer that inverts header style for 500ms, then reverts\n- Store notification rules in tui-state.json NotifyRules field\n- Notification deduplication: don't re-notify for messages already in the notification list",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-84q",
      "title": "fmail TUI: Bookmarks and Annotations",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T07:08:40.195700Z",
      "updated_at": "2026-02-09T07:11:49.461860Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build bookmarking and annotation features for saving and annotating important messages.\n\n## Layout — Bookmarks Panel\n```\n┌─ Bookmarks ──────────────────────── 12 saved ────────────┐\n│                                                          │\n│ Filter: _________                                        │\n│                                                          │\n│ ▸ \"JWT auth decision\" — architect in task (15:34)       │\n│   Note: Final decision was single-use refresh tokens     │\n│                                                          │\n│   \"Test command\" — tester in build (14:20)              │\n│   Note: go test ./auth/... -tags=integration             │\n│                                                          │\n│   \"Deploy checklist\" — deployer in deploy (12:00)       │\n│   (no note)                                              │\n│                                                          │\n│   \"Bug report\" — reviewer in @architect (11:30)         │\n│   Note: Race condition in token validation               │\n│                                                          │\n└──────────────────────────────────────────────────────────┘\n Enter: go to message  e: edit note  d: delete  x: export  Esc back\n```\n\n## Deliverables\n- Bookmarking:\n  - Press `b` on any selected message in any view to bookmark it\n  - Quick bookmark: no prompt, just saves with no note\n  - `B` (shift+b): bookmark with note — opens a small input for the annotation\n  - Bookmarked messages shown with a ★ indicator in all views\n  - Bookmark stored in tui-state.json: {messageID, topic, note, createdAt}\n  - Toggle: pressing `b` on an already-bookmarked message removes the bookmark (with confirmation)\n- Bookmarks panel (dedicated view):\n  - Access via `Ctrl+B` or from the dashboard\n  - List all bookmarks sorted by creation date (newest first)\n  - Each entry shows: note (if any), sender, topic, timestamp\n  - Preview of the message body below the note\n  - Filter bar: fuzzy search across notes and message bodies\n  - Sort options: by date bookmarked, by message date, by topic, by agent\n- Annotations:\n  - Annotations are notes attached to specific messages (different from bookmark notes)\n  - Press `a` on a selected message to add/edit an annotation\n  - Annotations shown as a colored note below the message in Thread View:\n    ```\n    │ architect (15:34)\n    │ Single-use refresh tokens...\n    │ 📌 Your note: This was the key design decision for the auth system\n    ```\n  - Annotations are local-only (stored in tui-state.json)\n  - Annotation shown in all views where the message appears\n- Export:\n  - From the bookmarks panel, press `x` to export all bookmarks as markdown\n  - Export format:\n    ```markdown\n    # Bookmarks - Exported 2026-02-09 16:00:00\n    \n    ## JWT auth decision\n    **From:** architect → task | **Time:** 15:34:10\n    **Note:** Final decision was single-use refresh tokens\n    \n    > Single-use. Each refresh mints a new refresh token alongside the access token.\n    > The old refresh token is immediately invalidated.\n    \n    ---\n    ```\n  - Export a single thread: `X` (shift+x) from Thread View exports the full thread as markdown\n  - Output to .fmail/exports/ directory\n- Bookmarks in search:\n  - `has:bookmark` filter in search to find only bookmarked messages\n  - `has:annotation` filter to find annotated messages\n\n## Technical Notes\n- Bookmark limit: 500 (prune oldest on save if exceeded, warn user)\n- Annotations stored as map[messageID]string in tui-state.json\n- Bookmark lookup: keep a set of bookmarked message IDs for O(1) lookup during render\n- Export uses the same message rendering as Thread View but in markdown format\n- Export directory created automatically if it doesn't exist (.fmail/exports/)",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-k8t",
      "title": "fmail TUI: Stats Dashboard view",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T07:07:45.303309Z",
      "updated_at": "2026-02-09T07:11:41.035052Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build a Stats Dashboard showing aggregate communication metrics and analytics.\n\n## Layout\n```\n┌─ Stats ──────────────────────── last 24h ────────────────┐\n│                                                          │\n│  OVERVIEW                    │  MESSAGES OVER TIME       │\n│  Total messages: 342         │  ▂▃▅▇█▇▅▃▂▁▂▃▅▇█▅▃▂▁   │\n│  Active agents:  6           │  ──────────────────────   │\n│  Active topics:  8           │  06:00     12:00    18:00 │\n│  Avg reply time: 2m 15s     │                           │\n│  Longest thread: 12 msgs    │  TOPIC VOLUME             │\n│                              │  task     ████████ 89     │\n│  TOP AGENTS (by msgs sent)   │  build    █████ 52        │\n│  1. architect   67 ████████ │  review   ████ 43         │\n│  2. coder-1     52 ██████   │  editing  ██ 23           │\n│  3. reviewer    43 █████    │  deploy   █ 12            │\n│  4. tester      23 ███      │                           │\n│  5. deployer    12 █        │  RESPONSE LATENCY         │\n│                              │  <30s  ████████████  45%  │\n│  BUSIEST HOUR                │  1-5m  ██████ 28%        │\n│  14:00-15:00 (47 msgs)      │  5-30m ████ 18%          │\n│                              │  >30m  ██ 9%             │\n└──────────────────────────────┴───────────────────────────┘\n [/] time range  r: refresh  Esc back\n```\n\n## Deliverables\n- Overview panel:\n  - Total message count in time range\n  - Unique active agents (agents who sent at least 1 message)\n  - Unique active topics\n  - Average reply time (mean of reply-to-parent deltas)\n  - Median reply time\n  - Longest thread (most messages in a single reply chain)\n  - Most replied-to message (message with the most direct replies)\n- Top agents:\n  - Sorted list of agents by messages sent\n  - Horizontal bar chart using block characters\n  - Show: rank, agent name (colored), count, bar\n  - Top 10, or all if fewer\n- Messages over time:\n  - Line chart / sparkline showing message volume over time\n  - X-axis: time, Y-axis: message count per bucket\n  - Bucket size depends on time range (same as heatmap)\n  - Use braille characters (⠁⠂⠄⡀⠈⠐⠠⢀) for high-resolution sparkline\n  - Or use block characters (▁▂▃▄▅▆▇█) for simpler rendering\n- Topic volume:\n  - Horizontal bar chart of messages per topic\n  - Sorted by volume descending\n  - Color-coded bars (topic colors)\n- Response latency distribution:\n  - Histogram of reply times bucketed into: <30s, 30s-5m, 5m-30m, 30m-2h, >2h\n  - Horizontal bar chart with percentage\n  - Color-coded: green (<30s), yellow (30s-5m), orange (5m-30m), red (>30m)\n- Busiest hour:\n  - Single highlighted stat: the hour with most messages\n  - \"Quietest hour\" below it\n- Time range controls:\n  - Same as heatmap: [/] to adjust, ←/→ to pan\n  - 4h, 12h, 24h, 7d, 30d, all-time\n- Auto-refresh: recompute every 30 seconds when live data is flowing\n- Thread depth analysis:\n  - Average thread depth (number of messages per thread)\n  - Distribution: 1 msg (standalone), 2-3, 4-10, 10+\n  - Shown as small bar chart or counts\n\n## Technical Notes\n- All stats computed from in-memory message data (same cache as other views)\n- Response latency: only count messages where reply_to exists and parent is found\n- Sparkline rendering: use a ring buffer of bucket counts, render proportional heights\n- Braille sparklines: charmbracelet/bubbles has a sparkline component, or implement with braille unicode block (U+2800-U+28FF)\n- For \"all-time\" range, scan entire .fmail/ store — may be slow, show loading indicator\n- Cache computed stats, invalidate on new messages",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-be1",
      "title": "fmail TUI: Activity Heatmap view",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T07:07:16.120468Z",
      "updated_at": "2026-02-09T07:11:40.980524Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build an Activity Heatmap showing agent communication patterns over time, similar to GitHub's contribution graph.\n\n## Layout\n```\n┌─ Activity Heatmap ──────────────── last 24h ────────────┐\n│                                                          │\n│  Hour:  00  02  04  06  08  10  12  14  16  18  20  22  │\n│         ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤  │\n│ archit  │░░░│   │   │   │▓▓▓│███│███│▓▓▓│░░░│   │   │  │\n│ coder-1 │   │   │   │   │░░░│▓▓▓│███│███│▓▓▓│░░░│   │  │\n│ tester  │   │   │   │   │   │░░░│░░░│▓▓▓│███│▓▓▓│░░░│  │\n│ review  │   │   │   │   │   │   │░░░│▓▓▓│▓▓▓│░░░│   │  │\n│ deploy  │   │   │   │   │   │   │   │   │░░░│▓▓▓│░░░│  │\n│         ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤  │\n│                                                          │\n│  Legend: ░ 1-5 msgs  ▓ 6-15 msgs  █ 16+ msgs           │\n│                                                          │\n│──────────────────────────────────────────────────────────│\n│  Summary:                                                │\n│  Peak hour: 14:00-15:00 (47 messages)                   │\n│  Most active: architect (67 msgs)                       │\n│  Busiest topic: task (89 msgs)                          │\n│  Avg response time: 2m 15s                              │\n└──────────────────────────────────────────────────────────┘\n [/] time range  s: sort  t: topic view  Esc back\n```\n\n## Deliverables\n- Heatmap grid:\n  - Rows: one per agent (sorted by total activity, most active at top)\n  - Columns: time buckets (granularity depends on range)\n    - 24h view: 1-hour buckets (24 columns)\n    - 7d view: 4-hour buckets (42 columns)\n    - 30d view: 1-day buckets (30 columns)\n  - Cell intensity: block characters with varying density\n    - Empty: no messages\n    - ░ (light): 1-5 messages\n    - ▒ (medium): 6-15 messages\n    - ▓ (dense): 16-30 messages\n    - █ (full): 31+ messages\n  - Color scale: cool (blue/cyan) for low activity → warm (yellow/red) for high\n  - Thresholds auto-scaled to the data (percentile-based)\n- Time range controls:\n  - `[` to shrink, `]` to expand: 4h, 12h, 24h, 7d, 30d\n  - ←/→ to pan the time window\n  - Current range shown in header\n- Topic heatmap mode:\n  - Press `t` to toggle: rows become topics instead of agents\n  - Shows which topics are hot at which times\n  - Same color scale and controls\n- Summary panel (below heatmap):\n  - Peak hour: time bucket with most messages\n  - Most active agent: agent with highest message count in range\n  - Busiest topic: topic with highest message count in range\n  - Average response time: mean time between a message and its first reply (across all threads)\n  - Total messages in range\n  - Unique agents active in range\n- Sort options:\n  - `s` cycles: by total activity, by name, by peak time, by recency\n- Cell detail:\n  - Navigate to a cell with arrow keys\n  - Show tooltip: \"architect, 14:00-15:00: 23 messages (task: 15, build: 5, DMs: 3)\"\n  - Enter on a cell → filter Timeline view to that agent + time range\n\n## Technical Notes\n- Heatmap data: aggregate message counts into time buckets per agent\n- Pre-compute when entering the view (scan all messages in time range)\n- Auto-scale thresholds: compute percentiles (25th, 50th, 75th, 95th) of non-zero cell values\n- Response time calculation: for each message with reply_to, compute delta between reply and parent\n  - Cache this per-thread, only recompute for new messages\n- Rendering: each cell is 3 characters wide (to fit in standard terminals)\n- For 30d view with many agents, support vertical scrolling\n- Agent name column: truncate to 8 chars with \"...\" for narrow terminals",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-ash",
      "title": "fmail TUI: Conversation Graph (agent interaction network)",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T07:06:50.874877Z",
      "updated_at": "2026-02-09T07:11:40.927536Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build a Conversation Graph view showing agent-to-agent communication as a network visualization.\n\n## Layout\n```\n┌─ Graph ────────────────── last 4h ── 156 messages ──────┐\n│                                                          │\n│                    ┌──────────┐                          │\n│              ╔═══>│ coder-1  │<═══╗                     │\n│              ║    │  (42)    │    ║                      │\n│              ║    └────┬─────┘    ║                      │\n│              ║  15 msgs│          ║ 8 msgs               │\n│         ┌────╨────┐    │    ┌─────╨────┐                │\n│         │architect│    │    │ reviewer  │                │\n│         │  (67)   │────┘    │   (23)   │                │\n│         └────┬────┘  23     └──────────┘                │\n│              │                                           │\n│         7 msgs│                                          │\n│         ┌────┴────┐                                      │\n│         │ tester  │                                      │\n│         │  (12)   │                                      │\n│         └─────────┘                                      │\n│                                                          │\n│  Legend: (N) = total messages sent                       │\n│  Edge = message count between agents                    │\n│  ═══ = high volume  ─── = low volume                    │\n└──────────────────────────────────────────────────────────┘\n +/- zoom  ←/→↑/↓ pan  Enter: detail  period: [/]  Esc back\n```\n\n## Deliverables\n- Network graph rendering:\n  - Each agent is a node (box) with: name (colored) + total message count\n  - Edges between agents who have communicated (DMs or shared topics)\n  - Edge thickness proportional to message volume:\n    - Thin (─) for 1-5 messages\n    - Medium (═) for 6-20 messages\n    - Thick (double ═) for 20+ messages\n  - Edge labels: message count\n  - Directed edges: arrows showing which direction messages flow (→)\n  - Bidirectional edges: double arrows (↔)\n  - Node size (box width) proportional to total messages sent\n  - Layout algorithm: force-directed (simplified for terminal):\n    - Most-connected agent in center\n    - Agents positioned by connectivity (closer = more messages between them)\n    - Avoid overlapping boxes\n- Time range:\n  - Default: last 4 hours\n  - Adjustable with `[` (shrink) and `]` (expand): 1h, 4h, 12h, 24h, 7d, all-time\n  - Graph re-renders with updated data for the selected range\n  - Show time range and total message count in header\n- Interaction:\n  - Navigate between nodes with ←/→/↑/↓\n  - Enter on a node → show popup with agent detail (messages sent/received, top topics, top correspondents)\n  - Enter on an edge → show messages between those two agents\n  - `c` → toggle cluster detection: auto-group agents that form working clusters\n    - Clusters drawn as dotted rectangles around agent groups\n    - Cluster = agents with >50% of their messages going to other cluster members\n- Topic overlay:\n  - Press `t` to toggle topic overlay\n  - Topics shown as circles instead of boxes\n  - Edges go agent → topic → agent, showing which topics connect agents\n  - Color-coded by topic\n\n## Technical Notes\n- Terminal graph rendering is inherently limited — keep it simple and readable\n- Force-directed layout: simplified version\n  1. Start with agents in a circle\n  2. Iteratively: attract connected nodes, repel all nodes, settle after N iterations\n  3. Snap to character grid (each node occupies a rectangular area)\n  4. Max 12 agents displayed (combine least-active into an \"others\" node)\n- For rendering: use box-drawing characters (─│┌┐└┘├┤┬┴┼) and arrows (→←↑↓)\n- Edge routing: simple Manhattan routing (horizontal then vertical) with collision avoidance\n- This view is optional/secondary — prioritize it being informative over perfectly laid out\n- Re-render only when time range changes or on explicit refresh, not on every message",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-0zs",
      "title": "fmail TUI: Replay Mode (time-travel playback)",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T07:06:22.463750Z",
      "updated_at": "2026-02-09T07:11:40.875830Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build a Replay Mode that allows scrubbing through historical message activity at variable speed.\n\n## Layout\n```\n┌─ REPLAY ──────────────── ▶ 10x ── 15:30:00 / 16:45:00 ─┐\n│                                                          │\n│  (same layout as Live Dashboard or Timeline, but         │\n│   showing historical state at the playback cursor)       │\n│                                                          │\n│  Agents at 15:30:                                        │\n│  ● architect (active)                                    │\n│  ◌ coder-1 (idle since 15:15)                           │\n│                                                          │\n│  Messages arriving:                                      │\n│  15:30:01 architect → task                              │\n│    implement JWT auth...                                 │\n│  ... (messages appear as time advances) ...              │\n│                                                          │\n│──────────────────────────────────────────────────────────│\n│  ◀◀  ◀  ▶ PLAYING  ▶▶  ││                              │\n│  [=========>-----------] 15:30 ──────────── 16:45        │\n│  Speed: [1x] [5x] [10x] [50x]                          │\n└──────────────────────────────────────────────────────────┘\n Space: play/pause  ←/→: skip  1-4: speed  Home/End: start/end\n```\n\n## Deliverables\n- Playback scrubber:\n  - Horizontal progress bar showing position within the replay time range\n  - Time range: auto-detected from first to last message in the store (or user-specified)\n  - Current playback position shown as HH:MM:SS above the scrubber\n  - Drag/click on scrubber to jump to any point (or use ←/→ to step)\n  - ←/→: skip forward/back by 1 message\n  - Shift+←/→: skip forward/back by 1 minute\n  - Home/End: jump to start/end\n- Playback controls:\n  - Space: play/pause\n  - Speed presets: 1 = real-time (1x), 2 = 5x, 3 = 10x, 4 = 50x\n  - Speed shown in the header\n  - During playback, messages appear in the feed at accelerated rate\n  - Each message \"arrives\" at its relative timestamp scaled by speed\n- Replay view:\n  - Default: uses the Live Dashboard layout (agents + feed)\n  - Toggle to Timeline layout with `t`\n  - Agent presence recalculated at each point in time:\n    - An agent is \"active\" if they sent a message within the last 5 minutes (relative to playback position)\n  - Message feed shows only messages up to the current playback position\n  - New messages \"arrive\" with a brief highlight animation (bold for 500ms)\n- Replay state:\n  - \"State at time T\" computation:\n    - Active agents: filter agent records by activity relative to T\n    - Active topics: topics with messages before T\n    - Unread counts: as if ReadMarkers were at T\n    - Message feed: all messages with timestamp ≤ T\n  - Pre-compute a sorted list of all message timestamps for efficient seeking\n- Bookmarkable positions:\n  - Press `m` to mark the current position (like vim marks)\n  - Press `'` + letter to jump to a marked position\n  - Marks shown as notches on the scrubber bar\n- Export:\n  - Press `e` to export the visible time range as a markdown report\n  - Report includes: time range, active agents, all messages formatted\n  - Written to .fmail/exports/replay-YYYYMMDD-HHMMSS.md\n\n## Technical Notes\n- Pre-load all messages sorted by timestamp into memory for the replay session\n- Use a timer (tea.Tick) for playback, interval = (real_time_between_messages / speed)\n- For gaps >30s between messages at current speed, fast-forward the clock (don't make users wait)\n- Replay mode is read-only — no sending messages from this view\n- State computation should be efficient: use binary search on sorted timestamps for \"messages up to T\"\n- Memory: for very large message stores (>100K messages), stream from disk instead of pre-loading\n- Playback position persisted in TUI state so user can resume replay later",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-xda",
      "title": "fmail TUI: Timeline / Sequence Diagram view",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T07:05:54.137953Z",
      "updated_at": "2026-02-09T07:11:40.875830Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build a Timeline view that shows messages chronologically across all topics, with an optional sequence-diagram swim-lane mode.\n\n## Layout — Chronological Mode\n```\n┌─ Timeline ──────────────────── 15:00 - 15:45 ───────────┐\n│                                                          │\n│  15:30:01 ── architect → task ──────────────────────── │\n│              implement JWT auth for the user service     │\n│                                                          │\n│  15:31:15 ── coder-1 → task ───────────────────────── │\n│              on it, ETA 30min                            │\n│                                                          │\n│  15:32:00 ── architect → build ────────────────────── │\n│              run full test suite                         │\n│                                                          │\n│  15:33:22 ── coder-1 → @architect (DM) ───────────── │\n│              need clarification on token refresh         │\n│                                                          │\n│  15:34:10 ── architect → @coder-1 (DM) ───────────── │\n│              Single-use. Each refresh mints a new...     │\n│                                                          │\n│              ▲ 5 minutes shown (zoom: +/- to adjust) ▲  │\n└──────────────────────────────────────────────────────────┘\n +/- zoom  ←/→ pan  f filter  s swim-lane  Esc back\n```\n\n## Layout — Swim-Lane (Sequence Diagram) Mode\n```\n┌─ Sequence ───────────────────── 15:00 - 15:45 ──────────┐\n│    architect     coder-1      tester      reviewer       │\n│        │            │            │            │           │\n│  15:30 ├──task────→│            │            │           │\n│        │            │            │            │           │\n│  15:31 │←──task────┤            │            │           │\n│        │            │            │            │           │\n│  15:32 ├──build───→│───────────→│            │           │\n│        │            │            │            │           │\n│  15:33 │←───DM─────┤            │            │           │\n│        │            │            │            │           │\n│  15:34 ├────DM────→│            │            │           │\n│        │            │            │            │           │\n│        │            │            │            │           │\n└──────────────────────────────────────────────────────────┘\n +/- zoom  ←/→ pan  t timeline  Enter: detail  Esc back\n```\n\n## Deliverables\n- Chronological timeline mode:\n  - ALL messages across all topics interleaved in strict time order\n  - Each message: timestamp (HH:MM:SS), agent (colored) → target, first line of body\n  - Vertical time axis on the left\n  - Visual time gaps: if >5 minutes between messages, show a gap indicator (\"── 15 min gap ──\")\n  - Reply connectors: if a message is a reply, show a thin connecting line to the parent\n  - Topic-colored left border on each message (each topic gets a color in addition to agents)\n  - Zoom levels: 1 min, 5 min, 15 min, 1h, 4h, 1d (changes visible time window)\n  - Pan: ←/→ arrows or h/l to move the time window\n  - Jump to now: press `n` to snap to current time\n  - Jump to time: press `t` and type a time/date to jump there\n- Swim-lane (sequence diagram) mode:\n  - Toggle with `s` key\n  - Each active agent gets a vertical column (lane)\n  - Messages shown as horizontal arrows from sender to receiver\n  - Arrow labels: topic name (abbreviated)\n  - DMs shown as dashed arrows\n  - Broadcast messages (topic posts) shown as arrows to all participants in that topic\n  - Time axis on the left (same zoom/pan as timeline mode)\n  - Agents sorted by first appearance (or alphabetically, toggle with `a`)\n  - Auto-hide inactive agents (agents with no messages in visible window)\n  - Max 8 lanes visible (scroll horizontally for more)\n  - Arrow colors: match the topic color\n- Filtering:\n  - Same filter syntax as Search view\n  - Press `f` to set filter, narrows visible messages\n  - Quick filters: by topic, by agent, by priority\n- Message detail:\n  - Enter on a message → popup overlay with full message details\n  - From the popup: `r` to reply, `b` to bookmark, `o` to open in Thread View\n\n## Technical Notes\n- This requires loading all messages in the visible time range across all topics\n- Pre-sort all messages by timestamp (they already have sortable IDs)\n- Swim-lane rendering: compute column positions based on terminal width and agent count\n  - Each lane: agent name header + vertical line (│)\n  - Arrows: ─→ or ←─ with label\n  - Use Unicode box-drawing characters for clean rendering\n- Zoom: each level defines a time.Duration window, pan moves by 25% of window\n- For large time ranges, only load message metadata (ID, from, to, time) and lazy-load bodies\n- This is the most rendering-intensive view — optimize with viewport virtualization\n- Cache time-sorted message lists per topic, merge with a k-way merge for cross-topic timeline",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-d07",
      "title": "fmail TUI: Search and Filter engine",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T07:05:23.144139Z",
      "updated_at": "2026-02-09T07:11:40.742734Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build comprehensive search and filter functionality accessible from any view.\n\n## Layout\n```\n┌─ Search ─────────────────────────────────────────────────┐\n│ > from:architect tag:auth since:1h token refresh_        │\n│                                                          │\n│  Saved: [auth-discussion] [high-priority] [today]        │\n│                                                          │\n│  12 results (searched 342 messages in 8 topics)          │\n│                                                          │\n│  ▸ [task] architect (15:30) — 2 matches                 │\n│    implement JWT auth...token refresh with sliding window │\n│    ─────────────────────────────matching context──────── │\n│                                                          │\n│    [task] coder-1 (15:31) — 1 match                     │\n│    ...should refresh tokens be single-use or reusable?   │\n│                                                          │\n│    [@coder-1] architect (15:34) — 1 match               │\n│    Single-use. Each refresh mints a new refresh token... │\n│                                                          │\n│    [build] architect (15:32) — 0 matches (context)      │\n│    run full test suite (adjacent to matching thread)      │\n│                                                          │\n└──────────────────────────────────────────────────────────┘\n Enter: open thread  Tab: next match  s: save search  Esc back\n```\n\n## Deliverables\n- Search input bar:\n  - Full-width text input at the top of the view\n  - Real-time search-as-you-type with debounce (200ms after last keystroke)\n  - Query syntax (all optional, combinable):\n    - Free text: matches against message body (case-insensitive)\n    - `from:<agent>` — filter by sender (supports glob: `from:coder-*`)\n    - `to:<topic|@agent>` — filter by target\n    - `priority:<high|normal|low>` — filter by priority\n    - `tag:<tag>` — filter by tag (multiple tag: filters ANDed)\n    - `since:<duration>` — messages newer than (1h, 30m, 2d, 1w)\n    - `until:<duration>` — messages older than\n    - `has:reply` — only messages that have been replied to\n    - `has:bookmark` — only bookmarked messages\n    - `is:unread` — only unread messages\n    - `in:<topic>` — scope to specific topic\n  - Syntax highlighting in the input: keywords in blue, values in green, free text in white\n  - Tab completion for agent names, topic names, and filter keywords\n- Search results:\n  - Grouped by topic, sorted by relevance (match count) then recency\n  - Each result shows: topic tag, agent (colored), timestamp, match count\n  - Matching text highlighted with bold/underline in the message body\n  - Context: show 1 message before and after each match for context\n  - Result count and search performance stats in header (\"12 results in 342 messages\")\n- Result navigation:\n  - j/k to move between results\n  - Tab/Shift+Tab to jump between highlighted matches\n  - Enter on a result → push to Thread View, scrolled to that message\n  - `o` to open the message in context (show surrounding thread)\n- Saved searches:\n  - Press `s` to save current search with a name\n  - Saved searches shown as pills below the search bar\n  - Click/Enter on a pill to load that search\n  - `x` on a pill to delete it\n  - Saved in tui-state.json\n- Search index (optimization for large message stores):\n  - Build an in-memory inverted index on first search\n  - Index: word → set of message IDs\n  - Rebuild index on new messages (incremental: only index new messages)\n  - Falls back to linear scan if index not ready\n\n## Technical Notes\n- Search runs against the data provider's Search() method\n- For the inverted index: tokenize message bodies by splitting on whitespace/punctuation\n- Case-insensitive matching: lowercase all tokens in the index\n- Glob matching for from:/to: filters: use filepath.Match semantics\n- Duration parsing: support h (hours), m (minutes), d (days), w (weeks)\n- Performance: search should feel instant for <1000 messages, <500ms for 10,000+\n- Debounce search-as-you-type to avoid excessive re-renders",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-7kd",
      "title": "fmail TUI: Live Tail mode",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T07:04:56.679514Z",
      "updated_at": "2026-02-09T07:11:31.760112Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Build the Live Tail mode — a focused, real-time message stream with filtering.\n\n## Layout\n```\n┌─ LIVE TAIL ─── filter: from:architect priority:high ─────┐\n│                                                           │\n│  15:30:01 [task] architect → task                        │\n│    implement JWT auth for the user service.               │\n│    Requirements: RS256 signing, 15min expiry...           │\n│                                                           │\n│  15:31:15 [task] coder-1 → task                          │\n│    on it, ETA 30min. Quick question — should              │\n│    refresh tokens be single-use or reusable?              │\n│                                                           │\n│  15:32:00 [build] architect → build                      │\n│    run full test suite                                    │\n│                                                           │\n│  15:33:22 [DM] coder-1 → @architect                     │\n│    need clarification on token refresh flow               │\n│                                                           │\n│  ▌  (auto-scrolling — Space to pause)                    │\n│                                                           │\n└───────────────────────────────────────────────── 12 msg/m ┘\n Space: pause/resume  f: filter  /: search  c: clear  Esc back\n```\n\n## Deliverables\n- Real-time message stream:\n  - Subscribe to ALL messages via the data provider's Subscribe()\n  - Messages displayed full-width with topic tag prefix: [topic] or [DM]\n  - Agent names in their assigned colors\n  - Timestamps at second precision (HH:MM:SS)\n  - Message body shown in full (up to 5 lines, truncate with \"...\" beyond)\n  - Horizontal rule (thin line) between messages from different topics\n- Auto-scroll behavior:\n  - Default: auto-scroll to newest message as they arrive\n  - Space bar: pause auto-scroll (show \"PAUSED\" indicator + buffered message count)\n  - While paused: new messages still buffered, scroll indicator shows count\n  - Space again or End/G: resume auto-scroll, flush buffer to view\n  - Scroll up with j/k/↑/↓/PgUp to manually browse while paused\n- Filtering (press `f` to open filter bar):\n  - Filter syntax: `from:<agent> to:<topic> priority:<high|normal|low> tag:<tag> text:<pattern>`\n  - Multiple filters ANDed together\n  - Filter applied in real-time — non-matching messages hidden\n  - Show active filter in the header\n  - Clear filter with `c` or edit with `f`\n  - Quick filters: `1` = high priority only, `2` = DMs only, `3` = current agent's messages\n- Keyword highlighting:\n  - Press `h` to set highlight patterns (regex)\n  - Matching text rendered in bold/underline with accent color\n  - Multiple highlight patterns supported (each gets a different color)\n  - Highlights persist across the session (stored in TUI state)\n- Message rate indicator:\n  - Footer shows messages per minute (rolling 60s window)\n  - Sparkline of message rate over last 10 minutes\n- Flash notification:\n  - On high-priority messages: briefly flash the header bar (invert colors for 500ms)\n  - Terminal bell on high-priority if sound alerts enabled in preferences\n\n## Technical Notes\n- This is essentially a filtered view of the Subscribe() channel\n- Buffer size: 2000 messages max (drop oldest), configurable\n- When paused, keep buffering but don't render — flush on resume\n- Filter parsing: simple key:value parser, no need for a full query language\n- Highlight patterns compiled to regexp on set, applied during render\n- Message rate: ring buffer of timestamps, count entries in last 60s\n- Performance: this view can see high throughput — batch renders (max 1 render per 50ms)",
      "epic": "forge-erz",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "sv-g7c",
      "title": "M7.5: fmail integration for team messaging",
      "status": "open",
      "priority": "P4",
      "created_at": "2026-01-30T05:34:42.289818Z",
      "updated_at": "2026-02-09T06:56:14.047747Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Message adapter for fmail (send task + status updates).\n- Configure fmail agent name + topics per team/agent.\n- Fallback to noop if fmail not configured.\n\nAcceptance:\n- Sending task emits fmail message to target agent.\n- Failures logged but do not block task creation.\n\nTests:\n- Unit tests with mocked fmail client.",
      "epic": "sv-x6b",
      "project": "prj-afyxck62",
      "comments_count": 0
    },
    {
      "id": "forge-hg2",
      "title": "TUI: Multi-view paging for matrix panels",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-08T10:29:08.001718Z",
      "updated_at": "2026-02-09T06:56:14.021947Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "In view 4, page through loop sets beyond visible capacity. Preserve pinned-first ordering and show page indicators.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-08T10:29:23.044123Z",
      "started_by": "codex",
      "closed_at": "2026-02-08T10:32:41.946224Z",
      "closed_by": "codex",
      "comments_count": 1,
      "last_comment_at": "2026-02-08T10:32:41.914203Z"
    },
    {
      "id": "forge-vab",
      "title": "TUI: Semantic log layers",
      "status": "closed",
      "priority": "P0",
      "created_at": "2026-02-08T10:29:08.055026Z",
      "updated_at": "2026-02-09T06:56:13.996047Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Add toggles for raw/events/errors/tools/diff views. Keep harness-aware highlighting per layer.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-08T10:32:41.973142Z",
      "started_by": "codex",
      "closed_at": "2026-02-08T10:34:34.761689Z",
      "closed_by": "codex",
      "comments_count": 2,
      "last_comment_at": "2026-02-08T10:34:34.717195Z"
    },
    {
      "id": "forge-h51",
      "title": "TUI: Command palette (Ctrl+P)",
      "status": "in_progress",
      "priority": "P0",
      "created_at": "2026-02-08T10:29:07.916509Z",
      "updated_at": "2026-02-09T06:56:13.970701Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Add fuzzy command palette for jumping loops/runs/tabs/actions. Include keyboard-only flow and contextual actions.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "workspace_id": "57e06952-45d2-4c3f-962b-ef2db43bee18",
      "workspace": "forge",
      "branch": "main",
      "started_at": "2026-02-08T10:34:34.790417Z",
      "started_by": "codex",
      "comments_count": 1,
      "last_comment_at": "2026-02-08T10:34:34.837936Z"
    },
    {
      "id": "forge-xjz",
      "title": "M10.7: Wait semantics and state synchronization",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T06:23:41.882773Z",
      "updated_at": "2026-02-09T06:56:13.945558Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Implement robust wait semantics:\n  - wait for idle\n  - wait for approval-needed\n  - wait for stopped/error\n  - timeout/cancel support\n- Add event-stream + polling fallback strategy.\n- Add --until and --timeout controls in CLI.\n\nAcceptance:\n- Wait command deterministic; no busy-looping.\n- Timeout exits with typed error and last observed state.\n\nTests:\n- Unit tests with simulated state streams.\n- Integration tests with delayed transitions.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-s90",
      "title": "M10.9: TTL, idle expiry, and subagent GC",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T06:23:41.936888Z",
      "updated_at": "2026-02-09T06:56:13.921650Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Add lifecycle controls for parked subagents:\n  - ttl\n  - idle timeout\n  - optional max age\n- Add GC worker/command to terminate expired subagents safely.\n- Emit events before/after eviction.\n\nAcceptance:\n- Stale subagents do not accumulate indefinitely.\n- Active subagents not evicted prematurely.\n\nTests:\n- Unit tests for TTL evaluator.\n- Integration test for GC path.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-26e",
      "title": "M10.10: Approval/policy inheritance and redaction",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T06:23:41.964881Z",
      "updated_at": "2026-02-09T06:56:13.897013Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Propagate approval policy + account/profile context from parent to child spawn defaults.\n- Add policy checks for risky send/interrupt commands.\n- Add redaction rules for sensitive payloads in subagent events.\n\nAcceptance:\n- Child runs with expected approval posture.\n- Sensitive text not leaked in audit fields.\n\nTests:\n- Unit tests for policy inheritance + redaction.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-p50",
      "title": "M10.11: Subagent summaries for parent rehydration",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T06:23:41.992624Z",
      "updated_at": "2026-02-09T06:56:13.872790Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Add transcript summarization helper for parent agents:\n  - concise status\n  - latest task outcome\n  - unresolved blockers\n- Store summary snapshots in subagent_events or dedicated summary table.\n- Add CLI: forge subagent summary <id>.\n\nAcceptance:\n- Parent can quickly rehydrate child context without full log dump.\n- Summary generation bounded/performant.\n\nTests:\n- Unit tests for summarizer formatting.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-ftz",
      "title": "M10.13: Docs and troubleshooting for delegated subagents",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T06:23:42.047981Z",
      "updated_at": "2026-02-09T06:56:13.846859Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Docs updates:\n  - README section for subagent workflows.\n  - docs/cli.md subagent commands + examples.\n  - docs/quickstart.md delegation recipe.\n  - docs/troubleshooting.md subagent failure playbook.\n- Add explicit harness-mode guidance (interactive vs one-shot).\n\nAcceptance:\n- New user can run delegated continuous subagent flow in <10 min.\n- Docs include at least 3 real command recipes.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-r0e",
      "title": "M10.14: Subagent observability + explain support",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T06:23:42.075456Z",
      "updated_at": "2026-02-09T06:56:13.821932Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Add observability:\n  - counters: subagents_spawned, subagents_revived, sends, interrupts, kill, wait_timeout\n  - gauges: active_subagents, idle_subagents\n  - latency: send_to_idle_duration\n- Add explain integration for subagent IDs.\n\nAcceptance:\n- Operators can answer: what subagents exist, which are stale, where failures happen.\n- Metrics emitted for both success and failure paths.\n\nTests:\n- Unit tests for metric emission hooks.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-xrq",
      "title": "M10.8: Subagent revive/resume workflow",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-09T06:23:41.909712Z",
      "updated_at": "2026-02-09T06:56:13.797693Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Implement revive workflow:\n  - detect dead subagent (pane/process missing).\n  - respawn compatible subagent.\n  - inject revive preamble containing compact context (last task, summary, pending objective).\n- Add revive policy flags:\n  - never\n  - ask\n  - auto\n- Ensure revive preserves parent linkage and audit trail.\n\nAcceptance:\n- Revive success path transparent to caller.\n- Revive failure returns actionable remediation.\n\nTests:\n- Integration tests for dead-subagent detection + respawn.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-bzn",
      "title": "TUI: Incident replay mode",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-08T10:29:08.297908Z",
      "updated_at": "2026-02-09T06:56:13.773105Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Capture and replay TUI state/events over time for incident reconstruction.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-5m9",
      "title": "TUI: Theme packs and accessibility presets",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-08T10:29:08.269418Z",
      "updated_at": "2026-02-09T06:56:13.748452Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Add high-contrast/low-light/colorblind-safe presets with quick switching.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-6k1",
      "title": "TUI: Keyboard macros",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-08T10:29:08.214397Z",
      "updated_at": "2026-02-09T06:56:13.724529Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Record and replay common navigation/filter/layout sequences.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-p34",
      "title": "TUI: Session bookmarks",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-08T10:29:08.150545Z",
      "updated_at": "2026-02-09T06:56:13.700675Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Allow bookmarking runs/log lines and jumping across bookmarks. Persist during TUI session.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-bc7",
      "title": "TUI: Activity heatmap and sparklines",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-08T10:29:08.118253Z",
      "updated_at": "2026-02-09T06:56:13.676444Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Add compact trend visuals for run rate, error rate, and duration/latency per loop.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-m7v",
      "title": "TUI: Time scrubber for loop timeline",
      "status": "open",
      "priority": "P2",
      "created_at": "2026-02-08T10:29:07.975335Z",
      "updated_at": "2026-02-09T06:56:13.652667Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Add timeline scrubber to traverse historical runs/log windows by time with keyboard controls.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-yva",
      "title": "M10.2: Subagent persistence (DB schema + repos)",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T06:23:41.747086Z",
      "updated_at": "2026-02-09T06:56:13.628673Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Add DB schema for persistent subagents + subagent events/messages.\n- Suggested tables:\n  - subagents\n  - subagent_messages (outbound/inbound metadata)\n  - subagent_events (state transitions, control actions)\n- Add repositories for CRUD/list/filter and append-only event writes.\n- Add indexes for hot paths: by state, by parent, by updated_at, by workspace.\n- Add migration rollback safety.\n\nAcceptance:\n- Subagent survives process restart.\n- Listing by workspace/parent/state efficient.\n- Event history queryable for audit/explain.\n\nTests:\n- Migration tests up/down.\n- Repository tests for create/get/list/filter/pagination.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-rt1",
      "title": "M10.4: CLI surface for forge subagent commands",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T06:23:41.801454Z",
      "updated_at": "2026-02-09T06:56:13.603861Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Add CLI group: forge subagent.\n- Subcommands:\n  - forge subagent spawn\n  - forge subagent send\n  - forge subagent wait\n  - forge subagent ps\n  - forge subagent show\n  - forge subagent interrupt\n  - forge subagent kill\n  - forge subagent revive\n- Add JSON output contracts for automation.\n- Add context-aware defaults (workspace, last subagent, parent marker) without hidden magic.\n\nAcceptance:\n- Non-interactive automation works with --json.\n- Human UX concise and predictable.\n- Errors provide next-step hints.\n\nTests:\n- CLI tests for parse/validation.\n- Golden tests for JSON output envelopes.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-45p",
      "title": "M10.5: Parent-oriented forge subagent run helper",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T06:23:41.828667Z",
      "updated_at": "2026-02-09T06:56:13.578113Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Add high-level parent-helper command:\n  - forge subagent run \"task\" [--subagent <id>] [--type codex] [--wait idle] [--revive]\n- Behavior:\n  - if subagent exists: reuse.\n  - else spawn with requested/default profile.\n  - send task.\n  - optionally wait for idle/completion marker.\n  - return summary payload for parent automation.\n- Include ergonomic flags for label/tag/task-id correlation.\n\nAcceptance:\n- One command handles common delegation loop.\n- Re-run with same --subagent continues prior callee context.\n- Output includes subagent_id + observed state + quick tail.\n\nTests:\n- Integration tests for create/reuse/revive paths.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-mp7",
      "title": "M10.12: End-to-end and regression test matrix",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T06:23:42.019932Z",
      "updated_at": "2026-02-09T06:56:13.552554Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Build comprehensive test matrix:\n  - spawn/send/wait/interrupt/kill/revive\n  - capability mismatch paths\n  - daemon unavailable fallback errors\n  - multi-subagent concurrency\n- Add regression tests for known pitfalls:\n  - one-shot harness used as continuous subagent\n  - stale pane ID after restart\n\nAcceptance:\n- CI includes subagent flow tests with stable fixtures.\n- Failures isolate root cause quickly.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-fbs",
      "title": "M10.3: Subagent service on top of forged transport",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T06:23:41.774653Z",
      "updated_at": "2026-02-09T06:56:13.527666Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Implement forged-backed Subagent service APIs using existing SpawnAgent/SendInput/List/Get/Kill primitives.\n- Add abstraction so subagent ops can run local or daemon-backed consistently.\n- Implement operations: SpawnSubagent, SendMessage, WaitState, InterruptSubagent, KillSubagent, ListSubagents, GetSubagent.\n- Store each operation in subagent_events.\n- Normalize transport errors.\n\nAcceptance:\n- Service can manage multiple concurrent subagents.\n- WaitState works for idle/working/approval/stopped with timeout.\n- Failures emit structured events and retain debug context.\n\nTests:\n- Unit tests with mocked forged client.\n- Integration test with local forged daemon for spawn/send/wait/kill.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-45t",
      "title": "TUI: Contextual onboarding and key hints",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-08T10:29:08.185468Z",
      "updated_at": "2026-02-09T06:56:13.500933Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Improve in-tab hints and first-run guidance overlays with dismiss/recall behavior.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-67x",
      "title": "TUI: Alert rail for failures/stuck loops",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-08T10:29:08.085089Z",
      "updated_at": "2026-02-09T06:56:13.475515Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Add sticky alert strip for failures, stuck loops, queue growth. Quick-jump to affected loop.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-2b5",
      "title": "TUI: Pane focus and side-by-side compare",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-08T10:29:08.028805Z",
      "updated_at": "2026-02-09T06:56:13.448158Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Enable zooming one pane and comparing two panes/log streams with synchronized scrolling.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-cqm",
      "title": "TUI: Universal search across logs/runs/metadata",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-08T10:29:07.945079Z",
      "updated_at": "2026-02-09T06:56:13.418911Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Implement full-text search mode spanning live logs, run output, loop metadata. Add highlight + next/prev matches.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-ktk",
      "title": "M10: Persistent subagents (non-loop delegation)",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T06:23:41.687487Z",
      "updated_at": "2026-02-09T06:56:13.393037Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Goal:\n- Add first-class persistent subagents for non-loop workflows.\n- Parent agent can spawn child, send one-off work, then continue chatting with same child on demand.\n- Keep subagents alive between tasks; support revive/resume when possible.\n\nProblem:\n- Current loop-first UX good for continuous repo loops, poor fit for ad-hoc delegated one-off + re-engage workflow.\n- Existing forged RPC has spawn/send primitives, but no stable end-user subagent primitive in forge CLI.\n\nScope:\n- New subagent lifecycle primitive (spawn/send/wait/list/interrupt/kill/revive).\n- Explicit harness capability handling (interactive vs one-shot modes).\n- Parent-focused delegation helper command for low-friction use.\n- Persistence, observability, safety policies, docs.\n\nOut of scope:\n- Replacing loop runtime.\n- Full autonomous team routing system (covered by M7+).\n\nSuccess metrics:\n- Parent can re-use same child subagent across multiple delegated tasks in one day.\n- Median command count for delegated task <= 3 commands.\n- Failed delegation due to dead/non-interactive subagent reduced via capability checks and revive path.\n\nAcceptance:\n- CLI subagent flow works end-to-end locally and with forged daemon.\n- Harness mismatch errors are explicit/actionable.\n- Subagent state is inspectable and auditable.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-52z",
      "title": "M10.1: Subagent model + lifecycle state machine",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T06:23:41.719673Z",
      "updated_at": "2026-02-09T06:56:13.367219Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Define canonical Subagent model: id, parent_subagent_id/parent_agent_id, workspace/repo, node, harness, mode, state, created_at, last_activity_at, ttl, labels/tags.\n- Define state machine: starting -> idle/working/awaiting_approval -> idle ... -> stopped/error/expired.\n- Define transitions + invariants (e.g. send only when subagent exists; revive only from stopped/error/expired).\n- Define mapping between forged AgentState and new SubagentState.\n- Define contract for \"continuous\" vs \"one-shot\" subagents.\n\nDeliverables:\n- Design doc in docs/design/subagent-lifecycle.md\n- State diagram + transition table.\n- Error taxonomy (not_found, not_interactive, dead_subagent, transport_unavailable, timeout_waiting_idle, policy_denied).\n\nAcceptance:\n- All subagent commands reference same state definitions.\n- No ambiguous transitions.\n- Edge cases documented: daemon restart, pane missing, process exit, approval wait.\n\nTests:\n- Unit tests for transition validator.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-hm7",
      "title": "M10.6: Harness capability matrix + mode guardrails",
      "status": "open",
      "priority": "P1",
      "created_at": "2026-02-09T06:23:41.856017Z",
      "updated_at": "2026-02-09T06:56:13.341260Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Scope:\n- Implement harness capability registry:\n  - supports_interactive_subagent\n  - supports_reliable_idle_detection\n  - supports_approval_signal\n  - default_command_mode (interactive vs one-shot)\n- Add guardrails:\n  - reject continuous-subagent requests for one-shot command modes.\n  - suggest fix (e.g., use interactive codex command, not codex exec).\n- Expose capability info in subagent show/doctor output.\n\nAcceptance:\n- User cannot accidentally create \"continuous\" subagent on one-shot mode without explicit override.\n- Messages clearly explain mismatch.\n\nTests:\n- Unit tests for capability lookup and guards.",
      "epic": "forge-ktk",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-bhm",
      "title": "TUI: Performance mode and incremental rendering",
      "status": "open",
      "priority": "P0",
      "created_at": "2026-02-08T10:29:08.242888Z",
      "updated_at": "2026-02-09T06:56:13.316361Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Optimize refresh cadence and rendering for high loop counts; avoid full redraw hot paths.",
      "epic": "forge-xt0",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    },
    {
      "id": "forge-xt0",
      "title": "Epic: Forge TUI 1% UX Excellence",
      "status": "open",
      "priority": "P0",
      "created_at": "2026-02-08T10:29:07.876296Z",
      "updated_at": "2026-02-09T06:56:13.285490Z",
      "created_by": "codex",
      "updated_by": "codex",
      "body": "Unify and ship a top-percentile Forge TUI experience. Scope: navigation speed, observability depth, matrix usability, performance, accessibility, and incident replay.",
      "project": "prj-krh6zdh0",
      "comments_count": 0
    }
  ]
}