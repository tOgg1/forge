---
id: f-e081
status: open
deps: [f-0fd1, f-c44a]
links: []
created: 2026-01-10T20:07:02Z
type: task
priority: 1
assignee: Tormod Haugland
parent: f-c2d0
---
# Implement fmail log (history + follow)

Implement `fmail log` to view message history from the file store.

Required behavior (per docs/forge-mail/SPEC.md):
- Usage:
  - fmail log                # all recent messages
  - fmail log <topic>        # topic only
  - fmail log @<agent>       # DM inbox for that agent
- Options:
  - -n/--limit (default 20)
  - --since (duration like 1h/30m OR timestamp)
  - --from (filter by sender)
  - -f/--follow (stream like tail -f)
  - --json

Implementation notes:
- Default log should merge recent messages across topics (and optionally DMs?) with stable ordering.
- Follow mode should stream new messages without reprinting old ones.

## Acceptance Criteria

- `fmail log task -n 5` prints last 5 messages for topic task
- `fmail log @myname` prints messages in dm/myname/
- `--since` filters correctly for both duration and ISO timestamps
- `--from` filters by message.from
- `--follow` streams new messages until interrupted
- `--json` outputs machine-readable messages (one object per line or a JSON array; choose and document)

