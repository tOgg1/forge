index|idx_accounts_cooldown|accounts|CREATE INDEX idx_accounts_cooldown ON accounts(cooldown_until)
index|idx_accounts_is_active|accounts|CREATE INDEX idx_accounts_is_active ON accounts(is_active)
index|idx_accounts_provider|accounts|CREATE INDEX idx_accounts_provider ON accounts(provider)
index|idx_agents_account_id|agents|CREATE INDEX idx_agents_account_id ON agents(account_id)
index|idx_agents_state|agents|CREATE INDEX idx_agents_state ON agents(state)
index|idx_agents_type|agents|CREATE INDEX idx_agents_type ON agents(type)
index|idx_agents_workspace_id|agents|CREATE INDEX idx_agents_workspace_id ON agents(workspace_id)
index|idx_alerts_agent_id|alerts|CREATE INDEX idx_alerts_agent_id ON alerts(agent_id)
index|idx_alerts_is_resolved|alerts|CREATE INDEX idx_alerts_is_resolved ON alerts(is_resolved)
index|idx_alerts_severity|alerts|CREATE INDEX idx_alerts_severity ON alerts(severity)
index|idx_alerts_workspace_id|alerts|CREATE INDEX idx_alerts_workspace_id ON alerts(workspace_id)
index|idx_approvals_agent_id|approvals|CREATE INDEX idx_approvals_agent_id ON approvals(agent_id)
index|idx_approvals_status|approvals|CREATE INDEX idx_approvals_status ON approvals(status)
index|idx_daily_usage_cache_date|daily_usage_cache|CREATE INDEX idx_daily_usage_cache_date ON daily_usage_cache(date)
index|idx_daily_usage_cache_provider|daily_usage_cache|CREATE INDEX idx_daily_usage_cache_provider ON daily_usage_cache(provider)
index|idx_events_entity|events|CREATE INDEX idx_events_entity ON events(entity_type, entity_id)
index|idx_events_entity_timestamp|events|CREATE INDEX idx_events_entity_timestamp ON events(entity_type, entity_id, timestamp)
index|idx_events_timestamp|events|CREATE INDEX idx_events_timestamp ON events(timestamp)
index|idx_events_type|events|CREATE INDEX idx_events_type ON events(type)
index|idx_file_locks_active|file_locks|CREATE INDEX idx_file_locks_active ON file_locks(workspace_id, expires_at) WHERE released_at IS NULL
index|idx_file_locks_path|file_locks|CREATE INDEX idx_file_locks_path ON file_locks(workspace_id, path_pattern)
index|idx_loop_kv_loop_id|loop_kv|CREATE INDEX idx_loop_kv_loop_id ON loop_kv(loop_id)
index|idx_loop_queue_items_loop_id|loop_queue_items|CREATE INDEX idx_loop_queue_items_loop_id ON loop_queue_items(loop_id)
index|idx_loop_queue_items_position|loop_queue_items|CREATE INDEX idx_loop_queue_items_position ON loop_queue_items(loop_id, position)
index|idx_loop_queue_items_status|loop_queue_items|CREATE INDEX idx_loop_queue_items_status ON loop_queue_items(status)
index|idx_loop_runs_loop_id|loop_runs|CREATE INDEX idx_loop_runs_loop_id ON loop_runs(loop_id)
index|idx_loop_runs_profile_id|loop_runs|CREATE INDEX idx_loop_runs_profile_id ON loop_runs(profile_id)
index|idx_loop_runs_status|loop_runs|CREATE INDEX idx_loop_runs_status ON loop_runs(status)
index|idx_loop_work_state_loop_current|loop_work_state|CREATE INDEX idx_loop_work_state_loop_current ON loop_work_state(loop_id, is_current)
index|idx_loop_work_state_loop_id|loop_work_state|CREATE INDEX idx_loop_work_state_loop_id ON loop_work_state(loop_id)
index|idx_loop_work_state_loop_updated|loop_work_state|CREATE INDEX idx_loop_work_state_loop_updated ON loop_work_state(loop_id, updated_at)
index|idx_loops_pool_id|loops|CREATE INDEX idx_loops_pool_id ON loops(pool_id)
index|idx_loops_profile_id|loops|CREATE INDEX idx_loops_profile_id ON loops(profile_id)
index|idx_loops_repo_path|loops|CREATE INDEX idx_loops_repo_path ON loops(repo_path)
index|idx_loops_short_id|loops|CREATE UNIQUE INDEX idx_loops_short_id ON loops(short_id)
index|idx_loops_state|loops|CREATE INDEX idx_loops_state ON loops(state)
index|idx_mail_messages_recipient|mail_messages|CREATE INDEX idx_mail_messages_recipient ON mail_messages(recipient_type, recipient_id)
index|idx_mail_messages_thread_id|mail_messages|CREATE INDEX idx_mail_messages_thread_id ON mail_messages(thread_id)
index|idx_mail_messages_unread|mail_messages|CREATE INDEX idx_mail_messages_unread ON mail_messages(recipient_id, read_at)
index|idx_mail_threads_workspace_id|mail_threads|CREATE INDEX idx_mail_threads_workspace_id ON mail_threads(workspace_id)
index|idx_nodes_name|nodes|CREATE INDEX idx_nodes_name ON nodes(name)
index|idx_nodes_status|nodes|CREATE INDEX idx_nodes_status ON nodes(status)
index|idx_pool_members_pool_id|pool_members|CREATE INDEX idx_pool_members_pool_id ON pool_members(pool_id)
index|idx_pool_members_profile_id|pool_members|CREATE INDEX idx_pool_members_profile_id ON pool_members(profile_id)
index|idx_pools_default|pools|CREATE INDEX idx_pools_default ON pools(is_default)
index|idx_port_allocations_agent|port_allocations|CREATE INDEX idx_port_allocations_agent ON port_allocations(agent_id)
index|idx_port_allocations_node|port_allocations|CREATE INDEX idx_port_allocations_node ON port_allocations(node_id)
index|idx_profiles_cooldown|profiles|CREATE INDEX idx_profiles_cooldown ON profiles(cooldown_until)
index|idx_profiles_harness|profiles|CREATE INDEX idx_profiles_harness ON profiles(harness)
index|idx_queue_items_agent_id|queue_items|CREATE INDEX idx_queue_items_agent_id ON queue_items(agent_id)
index|idx_queue_items_position|queue_items|CREATE INDEX idx_queue_items_position ON queue_items(agent_id, position)
index|idx_queue_items_status|queue_items|CREATE INDEX idx_queue_items_status ON queue_items(status)
index|idx_transcripts_agent_id|transcripts|CREATE INDEX idx_transcripts_agent_id ON transcripts(agent_id)
index|idx_transcripts_captured_at|transcripts|CREATE INDEX idx_transcripts_captured_at ON transcripts(agent_id, captured_at)
index|idx_transcripts_hash|transcripts|CREATE INDEX idx_transcripts_hash ON transcripts(agent_id, content_hash)
index|idx_usage_records_account_day|usage_records|CREATE INDEX idx_usage_records_account_day ON usage_records(account_id, date(recorded_at))
index|idx_usage_records_account_id|usage_records|CREATE INDEX idx_usage_records_account_id ON usage_records(account_id)
index|idx_usage_records_agent_id|usage_records|CREATE INDEX idx_usage_records_agent_id ON usage_records(agent_id)
index|idx_usage_records_provider|usage_records|CREATE INDEX idx_usage_records_provider ON usage_records(provider)
index|idx_usage_records_provider_time|usage_records|CREATE INDEX idx_usage_records_provider_time ON usage_records(provider, recorded_at)
index|idx_usage_records_recorded_at|usage_records|CREATE INDEX idx_usage_records_recorded_at ON usage_records(recorded_at)
index|idx_usage_records_session_id|usage_records|CREATE INDEX idx_usage_records_session_id ON usage_records(session_id)
index|idx_workspaces_name|workspaces|CREATE INDEX idx_workspaces_name ON workspaces(name)
index|idx_workspaces_node_id|workspaces|CREATE INDEX idx_workspaces_node_id ON workspaces(node_id)
index|idx_workspaces_status|workspaces|CREATE INDEX idx_workspaces_status ON workspaces(status)
table|accounts|accounts|CREATE TABLE accounts ( id TEXT PRIMARY KEY, provider TEXT NOT NULL CHECK (provider IN ('anthropic', 'openai', 'google', 'custom')), profile_name TEXT NOT NULL, credential_ref TEXT NOT NULL, is_active INTEGER NOT NULL DEFAULT 1, cooldown_until TEXT, usage_stats_json TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')), updated_at TEXT NOT NULL DEFAULT (datetime('now')), UNIQUE(provider, profile_name) )
table|agents|agents|CREATE TABLE agents ( id TEXT PRIMARY KEY, workspace_id TEXT NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE, type TEXT NOT NULL CHECK (type IN ('opencode', 'claude-code', 'codex', 'gemini', 'generic')), tmux_pane TEXT NOT NULL, account_id TEXT REFERENCES accounts(id) ON DELETE SET NULL, state TEXT NOT NULL DEFAULT 'starting' CHECK (state IN ('working', 'idle', 'awaiting_approval', 'rate_limited', 'error', 'paused', 'starting', 'stopped')), state_confidence TEXT NOT NULL DEFAULT 'low' CHECK (state_confidence IN ('high', 'medium', 'low')), state_reason TEXT, state_detected_at TEXT, paused_until TEXT, last_activity_at TEXT, metadata_json TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')), updated_at TEXT NOT NULL DEFAULT (datetime('now')), UNIQUE(workspace_id, tmux_pane) )
table|alerts|alerts|CREATE TABLE alerts ( id TEXT PRIMARY KEY, workspace_id TEXT REFERENCES workspaces(id) ON DELETE CASCADE, agent_id TEXT REFERENCES agents(id) ON DELETE CASCADE, type TEXT NOT NULL CHECK (type IN ('approval_needed', 'cooldown', 'error', 'rate_limit')), severity TEXT NOT NULL DEFAULT 'warning' CHECK (severity IN ('info', 'warning', 'error', 'critical')), message TEXT NOT NULL, is_resolved INTEGER NOT NULL DEFAULT 0, created_at TEXT NOT NULL DEFAULT (datetime('now')), resolved_at TEXT )
table|approvals|approvals|CREATE TABLE approvals ( id TEXT PRIMARY KEY, agent_id TEXT NOT NULL REFERENCES agents(id) ON DELETE CASCADE, request_type TEXT NOT NULL, request_details_json TEXT NOT NULL, status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'denied', 'expired')), created_at TEXT NOT NULL DEFAULT (datetime('now')), resolved_at TEXT, resolved_by TEXT )
table|daily_usage_cache|daily_usage_cache|CREATE TABLE daily_usage_cache ( account_id TEXT NOT NULL REFERENCES accounts(id) ON DELETE CASCADE, date TEXT NOT NULL, -- YYYY-MM-DD provider TEXT NOT NULL CHECK (provider IN ('anthropic', 'openai', 'google', 'custom')), input_tokens INTEGER NOT NULL DEFAULT 0, output_tokens INTEGER NOT NULL DEFAULT 0, total_tokens INTEGER NOT NULL DEFAULT 0, cost_cents INTEGER NOT NULL DEFAULT 0, request_count INTEGER NOT NULL DEFAULT 0, record_count INTEGER NOT NULL DEFAULT 0, updated_at TEXT NOT NULL DEFAULT (datetime('now')), PRIMARY KEY (account_id, date, provider) )
table|events|events|CREATE TABLE events ( id TEXT PRIMARY KEY, timestamp TEXT NOT NULL DEFAULT (datetime('now')), type TEXT NOT NULL, entity_type TEXT NOT NULL CHECK (entity_type IN ('node', 'workspace', 'agent', 'queue', 'account', 'system')), entity_id TEXT NOT NULL, payload_json TEXT, metadata_json TEXT )
table|file_locks|file_locks|CREATE TABLE file_locks ( id TEXT PRIMARY KEY, workspace_id TEXT NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE, agent_id TEXT NOT NULL REFERENCES agents(id) ON DELETE CASCADE, path_pattern TEXT NOT NULL, exclusive INTEGER NOT NULL DEFAULT 1, reason TEXT, ttl_seconds INTEGER NOT NULL, expires_at TEXT NOT NULL, created_at TEXT NOT NULL DEFAULT (datetime('now')), released_at TEXT )
table|loop_kv|loop_kv|CREATE TABLE loop_kv ( id TEXT PRIMARY KEY, loop_id TEXT NOT NULL REFERENCES loops(id) ON DELETE CASCADE, key TEXT NOT NULL, value TEXT NOT NULL, created_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')), updated_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')), UNIQUE(loop_id, key) )
table|loop_queue_items|loop_queue_items|CREATE TABLE loop_queue_items ( id TEXT PRIMARY KEY, loop_id TEXT NOT NULL REFERENCES loops(id) ON DELETE CASCADE, type TEXT NOT NULL CHECK (type IN ( 'message_append', 'next_prompt_override', 'pause', 'stop_graceful', 'kill_now', 'steer_message' )), position INTEGER NOT NULL, status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'dispatched', 'completed', 'failed', 'skipped')), attempts INTEGER NOT NULL DEFAULT 0, payload_json TEXT NOT NULL, error_message TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')), dispatched_at TEXT, completed_at TEXT )
table|loop_runs|loop_runs|CREATE TABLE loop_runs ( id TEXT PRIMARY KEY, loop_id TEXT NOT NULL REFERENCES loops(id) ON DELETE CASCADE, profile_id TEXT REFERENCES profiles(id) ON DELETE SET NULL, status TEXT NOT NULL DEFAULT 'running' CHECK (status IN ('running', 'success', 'error', 'killed')), prompt_source TEXT, prompt_path TEXT, prompt_override INTEGER NOT NULL DEFAULT 0, started_at TEXT NOT NULL DEFAULT (datetime('now')), finished_at TEXT, exit_code INTEGER, output_tail TEXT, metadata_json TEXT )
table|loop_work_state|loop_work_state|CREATE TABLE loop_work_state ( id TEXT PRIMARY KEY, loop_id TEXT NOT NULL REFERENCES loops(id) ON DELETE CASCADE, agent_id TEXT NOT NULL, task_id TEXT NOT NULL, status TEXT NOT NULL, detail TEXT, loop_iteration INTEGER NOT NULL DEFAULT 0, is_current INTEGER NOT NULL DEFAULT 0, created_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')), updated_at TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%SZ', 'now')), UNIQUE(loop_id, task_id) )
table|loops|loops|CREATE TABLE loops ( id TEXT PRIMARY KEY, name TEXT NOT NULL UNIQUE, repo_path TEXT NOT NULL, base_prompt_path TEXT, base_prompt_msg TEXT, interval_seconds INTEGER NOT NULL DEFAULT 30, pool_id TEXT REFERENCES pools(id) ON DELETE SET NULL, profile_id TEXT REFERENCES profiles(id) ON DELETE SET NULL, state TEXT NOT NULL DEFAULT 'stopped' CHECK (state IN ('running', 'sleeping', 'waiting', 'stopped', 'error')), last_run_at TEXT, last_exit_code INTEGER, last_error TEXT, log_path TEXT, ledger_path TEXT, tags_json TEXT, metadata_json TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')), updated_at TEXT NOT NULL DEFAULT (datetime('now')) , short_id TEXT, max_iterations INTEGER NOT NULL DEFAULT 0, max_runtime_seconds INTEGER NOT NULL DEFAULT 0)
table|mail_messages|mail_messages|CREATE TABLE mail_messages ( id TEXT PRIMARY KEY, thread_id TEXT NOT NULL REFERENCES mail_threads(id) ON DELETE CASCADE, sender_agent_id TEXT REFERENCES agents(id) ON DELETE SET NULL, recipient_type TEXT NOT NULL CHECK (recipient_type IN ('agent', 'workspace', 'broadcast')), recipient_id TEXT, subject TEXT, body TEXT NOT NULL, importance TEXT NOT NULL DEFAULT 'normal', ack_required INTEGER NOT NULL DEFAULT 0, read_at TEXT, acked_at TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')) )
table|mail_threads|mail_threads|CREATE TABLE mail_threads ( id TEXT PRIMARY KEY, workspace_id TEXT NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE, subject TEXT NOT NULL, created_at TEXT NOT NULL DEFAULT (datetime('now')), updated_at TEXT NOT NULL DEFAULT (datetime('now')) )
table|nodes|nodes|CREATE TABLE nodes ( id TEXT PRIMARY KEY, name TEXT NOT NULL UNIQUE, ssh_target TEXT, ssh_backend TEXT NOT NULL DEFAULT 'auto' CHECK (ssh_backend IN ('native', 'system', 'auto')), ssh_key_path TEXT, status TEXT NOT NULL DEFAULT 'unknown' CHECK (status IN ('online', 'offline', 'unknown')), is_local INTEGER NOT NULL DEFAULT 0, last_seen_at TEXT, metadata_json TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')), updated_at TEXT NOT NULL DEFAULT (datetime('now')) , ssh_agent_forwarding INTEGER NOT NULL DEFAULT 0, ssh_proxy_jump TEXT, ssh_control_master TEXT, ssh_control_path TEXT, ssh_control_persist TEXT, ssh_timeout_seconds INTEGER)
table|pool_members|pool_members|CREATE TABLE pool_members ( id TEXT PRIMARY KEY, pool_id TEXT NOT NULL REFERENCES pools(id) ON DELETE CASCADE, profile_id TEXT NOT NULL REFERENCES profiles(id) ON DELETE CASCADE, weight INTEGER NOT NULL DEFAULT 1, position INTEGER NOT NULL DEFAULT 0, created_at TEXT NOT NULL DEFAULT (datetime('now')), UNIQUE(pool_id, profile_id) )
table|pools|pools|CREATE TABLE pools ( id TEXT PRIMARY KEY, name TEXT NOT NULL UNIQUE, strategy TEXT NOT NULL DEFAULT 'round_robin', is_default INTEGER NOT NULL DEFAULT 0, metadata_json TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')), updated_at TEXT NOT NULL DEFAULT (datetime('now')) )
table|port_allocations|port_allocations|CREATE TABLE port_allocations ( id INTEGER PRIMARY KEY AUTOINCREMENT, -- The allocated port number port INTEGER NOT NULL, -- The node this port is allocated on (ports are node-local) node_id TEXT NOT NULL REFERENCES nodes(id) ON DELETE CASCADE, -- The agent using this port (nullable - port can be reserved but unassigned) agent_id TEXT REFERENCES agents(id) ON DELETE CASCADE, -- Human-readable reason for allocation reason TEXT, -- When the allocation was created allocated_at TEXT NOT NULL DEFAULT (datetime('now')), -- Unique constraint: only one allocation per port per node at a time UNIQUE(node_id, port) )
table|profiles|profiles|CREATE TABLE profiles ( id TEXT PRIMARY KEY, name TEXT NOT NULL UNIQUE, harness TEXT NOT NULL, auth_kind TEXT, auth_home TEXT, prompt_mode TEXT NOT NULL DEFAULT 'env' CHECK (prompt_mode IN ('env', 'stdin', 'path')), command_template TEXT NOT NULL, model TEXT, extra_args_json TEXT, env_json TEXT, max_concurrency INTEGER NOT NULL DEFAULT 1, cooldown_until TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')), updated_at TEXT NOT NULL DEFAULT (datetime('now')) )
table|queue_items|queue_items|CREATE TABLE queue_items ( id TEXT PRIMARY KEY, agent_id TEXT NOT NULL REFERENCES agents(id) ON DELETE CASCADE, type TEXT NOT NULL CHECK (type IN ('message', 'pause', 'conditional')), position INTEGER NOT NULL, status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'dispatched', 'completed', 'failed', 'skipped')), payload_json TEXT NOT NULL, error_message TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')), dispatched_at TEXT, completed_at TEXT , attempts INTEGER NOT NULL DEFAULT 0)
table|schema_version|schema_version|CREATE TABLE schema_version ( version INTEGER PRIMARY KEY, applied_at TEXT NOT NULL DEFAULT (datetime('now')), description TEXT )
table|transcripts|transcripts|CREATE TABLE transcripts ( id INTEGER PRIMARY KEY AUTOINCREMENT, agent_id TEXT NOT NULL REFERENCES agents(id) ON DELETE CASCADE, content TEXT NOT NULL, content_hash TEXT NOT NULL, captured_at TEXT NOT NULL DEFAULT (datetime('now')) )
table|usage_records|usage_records|CREATE TABLE usage_records ( id TEXT PRIMARY KEY, account_id TEXT NOT NULL REFERENCES accounts(id) ON DELETE CASCADE, agent_id TEXT REFERENCES agents(id) ON DELETE SET NULL, session_id TEXT, provider TEXT NOT NULL CHECK (provider IN ('anthropic', 'openai', 'google', 'custom')), model TEXT, input_tokens INTEGER NOT NULL DEFAULT 0, output_tokens INTEGER NOT NULL DEFAULT 0, total_tokens INTEGER NOT NULL DEFAULT 0, cost_cents INTEGER NOT NULL DEFAULT 0, request_count INTEGER NOT NULL DEFAULT 1, recorded_at TEXT NOT NULL DEFAULT (datetime('now')), metadata_json TEXT )
table|workspaces|workspaces|CREATE TABLE workspaces ( id TEXT PRIMARY KEY, name TEXT NOT NULL, node_id TEXT NOT NULL REFERENCES nodes(id) ON DELETE CASCADE, repo_path TEXT NOT NULL, tmux_session TEXT NOT NULL, status TEXT NOT NULL DEFAULT 'active' CHECK (status IN ('active', 'inactive', 'error')), git_info_json TEXT, created_at TEXT NOT NULL DEFAULT (datetime('now')), updated_at TEXT NOT NULL DEFAULT (datetime('now')), UNIQUE(node_id, repo_path), UNIQUE(node_id, tmux_session) )
trigger|update_accounts_timestamp|accounts|CREATE TRIGGER update_accounts_timestamp AFTER UPDATE ON accounts BEGIN UPDATE accounts SET updated_at = datetime('now') WHERE id = NEW.id; END
trigger|update_agents_timestamp|agents|CREATE TRIGGER update_agents_timestamp AFTER UPDATE ON agents BEGIN UPDATE agents SET updated_at = datetime('now') WHERE id = NEW.id; END
trigger|update_loop_kv_timestamp|loop_kv|CREATE TRIGGER update_loop_kv_timestamp AFTER UPDATE ON loop_kv BEGIN UPDATE loop_kv SET updated_at = strftime('%Y-%m-%dT%H:%M:%SZ', 'now') WHERE id = NEW.id; END
trigger|update_loop_work_state_timestamp|loop_work_state|CREATE TRIGGER update_loop_work_state_timestamp AFTER UPDATE ON loop_work_state BEGIN UPDATE loop_work_state SET updated_at = strftime('%Y-%m-%dT%H:%M:%SZ', 'now') WHERE id = NEW.id; END
trigger|update_loops_timestamp|loops|CREATE TRIGGER update_loops_timestamp AFTER UPDATE ON loops BEGIN UPDATE loops SET updated_at = datetime('now') WHERE id = NEW.id; END
trigger|update_nodes_timestamp|nodes|CREATE TRIGGER update_nodes_timestamp AFTER UPDATE ON nodes BEGIN UPDATE nodes SET updated_at = datetime('now') WHERE id = NEW.id; END
trigger|update_pools_timestamp|pools|CREATE TRIGGER update_pools_timestamp AFTER UPDATE ON pools BEGIN UPDATE pools SET updated_at = datetime('now') WHERE id = NEW.id; END
trigger|update_profiles_timestamp|profiles|CREATE TRIGGER update_profiles_timestamp AFTER UPDATE ON profiles BEGIN UPDATE profiles SET updated_at = datetime('now') WHERE id = NEW.id; END
trigger|update_workspaces_timestamp|workspaces|CREATE TRIGGER update_workspaces_timestamp AFTER UPDATE ON workspaces BEGIN UPDATE workspaces SET updated_at = datetime('now') WHERE id = NEW.id; END
